<!DOCTYPE html>
<!-- saved from url=(0031)https://www.guyuehome.com/37657 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Rviz显示不出数据了！一文搞懂Qos - 古月居</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="applicable-device" content="pc,mobile">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
<meta name="renderer" content="webkit">
<meta name="keywords" content="ROS2入门,ROS2教学">
<meta name="description" content="Rviz显示不出数据了！一文搞懂Qos">
<meta name="format-detection" content="telephone = no">
<meta name="robots" content="INDEX,FOLLOW">
<meta name="baidu-site-verification" content="code-OdyPrWz0T4">
<!-- <link rel="icon" href="/Application/Home/View/default/Public/images/cropped-gyh_logo-32x32.png" sizes="32x32" />
<link rel="icon" href="/Application/Home/View/default/Public/images/cropped-gyh_logo-192x192.png" sizes="192x192" /> -->
<link rel="shortcut icon" href="https://www.guyuehome.com/Application/Home/View/default/Public/images/favicon.ico">
<link rel="bookmark" href="https://www.guyuehome.com/Application/Home/View/default/Public/images/favicon.ico">

<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/layui.css">
<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/swiper.min.css">
<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/select2.min.css">
<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/global.css">
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/hm.js.下载"></script><script type="text/javascript" src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/push.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/twemoji.min.js.下载"></script>
<script>
    (function(){
        /*var bp = document.createElement('script');
        bp.src = '//push.zhanzhang.baidu.com/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);*/
    })();
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/js"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-KRJWPPNFLS');
</script>
<!--[if lt IE 9]>
    <script src="/Application/Home/View/default/Public/html5shiv.min.js"></script>
    <script src="/Application/Home/View/default/Public/respond.min.js"></script>
<![endif]-->
<style>
    .fluidbox__wrap img {
        float: none !important;
    }
    .tox-tinymce--toolbar-sticky-off .tox-editor-header {
        border: 0 solid white !important;
    }
    .tox-tinymce--toolbar-bottom .tox-toolbar-overlord {
        background: transparent !important;
    }
    .tox-tinymce--toolbar-bottom .tox-toolbar__primary {
        background: transparent !important;
    }
    .tox .tox-collection--grid .tox-collection__item {
        padding: 8px !important;
    }
    .release-textarea-btn { display: flex !important; }
    .tox-collection__item-icon img[data-emoticon="true"] {
        height: 28px !important;
        width: 28px !important;
        display: inline;
    }
    .comment-list img[data-emoticon="true"] {
        height: 22px !important;
        width: 22px !important;
        display: inline;
    }
    .tox .tox-collection--grid .tox-collection__group {
        max-height: none !important;
    }
    .tox .tox-dialog__footer {
        border-top: 0px solid #ccc !important;
    }
</style>

<link id="layuicss-laydate" rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/laydate.css" media="all"><link id="layuicss-layer" rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/layer.css" media="all"><link id="layuicss-skincodecss" rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/code.css" media="all"></head>
<body>
<header class="header">
    <div class="container">
        <a href="https://www.guyuehome.com/" class="logo"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/logo.png" title="" alt=""></a>
        <nav class="nav">
            <div class="mobile-login">
                <div class="title">
                    <span>账户与分类</span>
                    <a href="javascript:;" class="close-navbar js_close_navbar"></a>
                </div>
                <!--已登录 -->
                                    <!--未登录 -->
                    <div class="cell">
                        <div class="pic"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/img_default_user.png" title="" alt=""></div>
                        <div class="cell-bd">还未登录/注册</div>
                        <a href="javascript:;" class="btn js_login">登录/注册</a>
                    </div>            </div>
            <ul>
                <li><a href="https://www.guyuehome.com/" title="首页"><i class="icon-home"></i>首页</a></li>
                <li>
                    <a href="https://www.guyuehome.com/blog/index" target="_blank"><i class="icon-blog"></i>博客</a>
                    <div class="blog-nav-list" style="display: none;">
                            <div class="blog-nav-box">
                                <a href="https://www.guyuehome.com/blog/index" class="swiper-slide">全部</a>
                                <a href="https://www.guyuehome.com/blog/index/category/11" class="swiper-slide">ROS探索总结</a><a href="https://www.guyuehome.com/blog/index/category/12" class="swiper-slide">ROS2探索总结</a><a href="https://www.guyuehome.com/blog/index/category/35" class="swiper-slide">ROS入门教程</a><a href="https://www.guyuehome.com/blog/index/category/18" class="swiper-slide">ROS</a><a href="https://www.guyuehome.com/blog/index/category/15" class="swiper-slide">智能车竞赛</a><a href="https://www.guyuehome.com/blog/index/category/22" class="swiper-slide">建图导航</a><a href="https://www.guyuehome.com/blog/index/category/34" class="swiper-slide">运动控制</a><a href="https://www.guyuehome.com/blog/index/category/36" class="swiper-slide">自动驾驶</a><a href="https://www.guyuehome.com/blog/index/category/23" class="swiper-slide">机器视觉</a><a href="https://www.guyuehome.com/blog/index/category/33" class="swiper-slide">机器学习</a><a href="https://www.guyuehome.com/blog/index/category/21" class="swiper-slide">建模仿真</a><a href="https://www.guyuehome.com/blog/index/category/20" class="swiper-slide">机器人学</a><a href="https://www.guyuehome.com/blog/index/category/14" class="swiper-slide">ROS2入门教程</a><a href="https://www.guyuehome.com/blog/index/category/24" class="swiper-slide">硬件电路</a><a href="https://www.guyuehome.com/blog/index/category/25" class="swiper-slide">创客DIY教程</a><a href="https://www.guyuehome.com/blog/index/category/16" class="swiper-slide">智能机器人创意大赛</a><a href="https://www.guyuehome.com/blog/index/category/13" class="swiper-slide">ROS史话36篇</a><a href="https://www.guyuehome.com/blog/index/category/26" class="swiper-slide">学习笔记</a><a href="https://www.guyuehome.com/blog/index/category/19" class="swiper-slide">ROS2</a><a href="https://www.guyuehome.com/blog/index/category/27" class="swiper-slide">云实践平台</a><a href="https://www.guyuehome.com/blog/index/category/8" class="swiper-slide">技术前沿</a><a href="https://www.guyuehome.com/blog/index/category/9" class="swiper-slide">行业资讯</a><a href="https://www.guyuehome.com/blog/index/category/17" class="swiper-slide">古月居社区</a><a href="https://www.guyuehome.com/blog/index/category/37" class="swiper-slide">TogetherROS</a>                            </div>
                        </div>                    </li><li>
                    <a href="https://www.guyuehome.com/bubble/index" target="_blank"><i class="icon-bubble"></i>泡泡</a>
                                        </li><li>
                    <a href="https://class.guyuehome.com/" target="_blank"><i class="icon-school"></i>古月学院</a>
                                        </li><li>
                    <a href="https://www.guyuehome.com/project" target="_blank"><i class="icon-"></i>项目</a>
                                        </li><li>
                    <a href="https://www.guyuehome.com/school" target="_blank"><i class="icon-school-service"></i>高校服务</a>
                                        </li><li>
                    <a href="https://www.guyuehome.com/company" target="_blank"><i class="icon-company-service"></i>企业服务</a>
                                        </li>                <li><a href="https://www.guyuehome.com/Notice/index" title="通知"><i class="icon-system"></i>通知</a></li>
            </ul>
                    </nav>
        <!--<div class="search">
            <form method="post" action="/index/search" class="search-wrap">
                <button class="search-btn"></button>
                <div class="search-keyword">
                    <input id="keyword" type="text" name="keyword" value="" placeholder="搜索" />
                </div>
            </form>
        </div>-->
        <div class="search ">
            <div class="search-wrap">
                <button class="search-icon js_search_btn" style=""></button>
                <div class="search-keyword">
                    <input type="text" name="keyword" value="" onfocus="dataList()" placeholder="机器人工具箱">
                </div>
            </div>
            <div class="search-box" style="display: none;">
                <form id="searchFrom" method="post" onsubmit="return check_keyword();" action="https://www.guyuehome.com/index/search" class="search-wrap">
                    <button type="button" class="search-icon" style=""></button>
                    <div class="search-keyword">
                        <input type="text" name="keyword" placeholder="机器人工具箱" value="" autocomplete="off" onfocus="dataList()">
                    </div>
                    <button type="submit" class="search-btn">搜索</button>
                </form>
                <div class="search-data">
                    <div class="search-list search-list-one">
                        <div class="search-title"><h6>搜索历史</h6><div class="clear clear-all">清空</div></div>
                        <ul></ul>
                    </div>
                    <div class="search-list">
                        <div class="search-title"><h6>热门搜索</h6></div>
                        <ul>
                            <li><a href="https://www.guyuehome.com/37657#">机器人工具箱</a><i class="hot"></i></li><li><a href="https://www.guyuehome.com/37657#">aruco</a><i class="hot"></i></li><li><a href="https://www.guyuehome.com/37657#">pcl</a></li><li><a href="https://www.guyuehome.com/37657#">UR</a></li><li><a href="https://www.guyuehome.com/37657#">树莓派</a></li>                        </ul>
                    </div>
                </div>
            </div>


        </div>
        <div class="right">
            <div class="hamburger">
                <span class="icon-bar icon-bar-1"></span>
                <span class="icon-bar icon-bar-2"></span>
                <span class="icon-bar icon-bar-3"></span>
            </div>
        </div>
        <div class="release-dropdown">
            <a href="javascript:;" title="发布" class="release-btn js_login"><i class="icon-release"></i>发布</a>
                    </div>
        
        <div class="user-dropdown">
            <a href="javascript:;" class="user-status js_login">
                                    <img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/img_default_user.png" title="" alt="">                            </a>
                    </div>
        <!-- <div class="user-dropdown">
          <a href="javascript:;" class="user-status"><img src="/Application/Home/View/default/Public/images/cms_/Application/Home/View/default/Public/images/img_default_user.png" title="" alt="" /></a>
          <ul class="user-dropdown-menu">
            <li><a href="my_page.html" title="我的主页"><i class="icon-homepage"></i>我的主页</a></li>
            <li><a href="datacenter.html" title="数据中心"><i class="icon-data"></i>数据中心</a></li>
            <li><a href="#" title="退出登录"><i class="icon-quit"></i>退出登录</a></li>
          </ul>
        </div> -->
    </div>
</header>
<style>
    .like-btn span.like-num { display: block; }
    .follow-btn span.collect-num { display: block; }   
    .article-body table.hljs-ln, .article-body table.hljs-ln th, .article-body table.hljs-ln td {
        border: 0;
        padding: 0;
    }
    .article-body:not([dir=rtl]) blockquote {
        border-left: 2px solid #ccc;
        margin-left: 1.5rem;
        padding-left: 1rem;
    }
    .comment-area {
        background: #F8FAFD;
        border-radius: 4px;
        border: 1px solid #F0F1F3;
        min-height: 100px;
        padding: 8px;
    }
    .introduction {
        /*display: flex;*/
        flex-direction: column;
    }
    .js_reply_more,.js_comment_reply {
        cursor: pointer;
    }
    .comment-list .author{
        display: none;
    }
    .headline-not-login {
        border-bottom: none;
        padding-bottom: 0 !important;
        margin-bottom: 0;
    }
    .best-blog {
        color: #fc5531;
        background: #fff1f0;
        padding: 0 4px;
        font-weight: normal;
        margin-right: 4px;
    }
</style>

<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/share.min.css">

<div class="main">
    <div class="container">
        <div class="floor">
            <div class="main-left">
                <div class="white-bg mb-20 content">
                    <div class="content-head">
                        <h1 class="mb-20">Rviz显示不出数据了！一文搞懂Qos</h1>
                        <div class="cell">
                            <div class="pic48" data-url="/ajax/author/625823771aadb">
                                <a href="https://www.guyuehome.com/author/625823771aadb" target="_blank"> <img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/6258246010648.jpeg" onerror="this.onerror=null;this.src=&#39;/Application/Home/View/default/Public/images/cms_images/img_default_user.png&#39;" title="" alt="">
                                </a>
                            </div>
                            <div class="cell-bd">
                                
                                <a href="https://www.guyuehome.com/author/625823771aadb" target="_blank"><h4 class="clamp-one medium-font">首飞</h4></a>
                                <div class="flexLeftCenter fz-13">
                                    <div class="mr-20">分类：<a href="https://www.guyuehome.com/blog/index/category/19" class="blue">ROS2</a></div>
                                    <div class="mr-20">个人专栏：<a href="https://www.guyuehome.com/blog/column/id/126" class="blue">ROS2</a></div>                                    <span>发布时间 2022.04.25</span><span class="ml-20">阅读数 2840 </span><span class="ml-20">评论数 0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  编辑器 -->
                    <div class="article-body">
                        <p>ROS2的通信中间件换成了<code>DDS</code><div class="copy-code" style="display: none">DDS</div><button class="copy-btn js_login">登录后复制</button>。这让我们可以精准地控制节点间的通信质量。通信效率也迎来了一次大的提升。</p>
<p>但是…</p>
<p>但是…</p>
<p>一个不小心，看到了类似这样的报错信息：</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token punctuation">[</span>WARN<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578813.965216245</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: New publisher discovered on topic <span class="token string">'/qos_test'</span>, offering incompatible QoS. No messages will be received from it. Last incompatible policy: RELIABILITY
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 72px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">[WARN] [1644578813.965216245] [subscriber_qos_obj]: New publisher discovered on topic '/qos_test', offering incompatible QoS. No messages will be received from it. Last incompatible policy: RELIABILITY
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<p>本来好好的<code>Rviz</code><div class="copy-code" style="display: none">Rviz</div><button class="copy-btn js_login">登录后复制</button>也显示不了雷达数据了。</p>
<p>这就是<code>incompatible QoS</code><div class="copy-code" style="display: none">incompatible QoS</div><button class="copy-btn js_login">登录后复制</button>搞的鬼！</p>
<p><strong>两个节点的Qos设置不兼容将没法通信</strong></p>
<h2 id="h2--qos-quality-of-service-"><a name="那什么是Qos（Quality of Service）" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>那什么是Qos（Quality of Service）</h2>
<p>在<code>ROS1</code><div class="copy-code" style="display: none">ROS1</div><button class="copy-btn js_login">登录后复制</button>中，节点间的通信是基于<code>TCP</code><div class="copy-code" style="display: none">TCP</div><button class="copy-btn js_login">登录后复制</button>的。因为<code>TCP</code><div class="copy-code" style="display: none">TCP</div><button class="copy-btn js_login">登录后复制</button>的失败重传机制，在一些网络不稳定的场景，通信会出现延时严重的问题。这大大限制了<code>ROS1</code><div class="copy-code" style="display: none">ROS1</div><button class="copy-btn js_login">登录后复制</button>的使用场景。</p>
<p>在<code>ROS2</code><div class="copy-code" style="display: none">ROS2</div><button class="copy-btn js_login">登录后复制</button>中，采用<code>DDS</code><div class="copy-code" style="display: none">DDS</div><button class="copy-btn js_login">登录后复制</button>作为通信中间件。<code>ROS2</code><div class="copy-code" style="display: none">ROS2</div><button class="copy-btn js_login">登录后复制</button>的<code>DDS</code><div class="copy-code" style="display: none">DDS</div><button class="copy-btn js_login">登录后复制</button>中间件是可以配置成不同厂家提供的。这些不同的<code>DDS</code><div class="copy-code" style="display: none">DDS</div><button class="copy-btn js_login">登录后复制</button>各自有不同的侧重点，可根据项目的不同需求来选择。<code>ROS2 Galactic和Rolling</code><div class="copy-code" style="display: none">ROS2 Galactic和Rolling</div><button class="copy-btn js_login">登录后复制</button>默认采用<code>rmw_cyclonedds_cpp</code><div class="copy-code" style="display: none">rmw_cyclonedds_cpp</div><button class="copy-btn js_login">登录后复制</button>。<code>rmw_cyclonedds_cpp</code><div class="copy-code" style="display: none">rmw_cyclonedds_cpp</div><button class="copy-btn js_login">登录后复制</button>在进程间和多主机间通信的场景下，主要是使用<code>UDP</code><div class="copy-code" style="display: none">UDP</div><button class="copy-btn js_login">登录后复制</button>做为通信媒介。</p>
<p>通过正确的服务质量策略配置，ROS2可以像TCP一样可靠，也可以像UDP那样尽力而为。在不稳定的网络环境下，“尽力而为”策略将更合适。在实时性要求高的场景下，设定数据的有效性将是必须的。</p>
<p>针对节点特定的工作负载和使用场景，有倾向地配置<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>将可以使通信质量达到最佳。</p>
<p>我们可以为发布器、订阅器、提供服务的服务器和客户端配置QoS。</p>
<p>因为每个节点的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>是可以单独配置的，所以如果配置的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>互相不兼容，节点间的通信将无法建立。</p>
<h2 id="h2-qos-quality-of-service-"><a name="Qos（Quality of Service）有哪些配置项" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>Qos（Quality of Service）有哪些配置项</h2>
<h3 id="h3-u914Du7F6Eu9879u76EE"><a name="配置项目" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>配置项目</h3>
<ul>
<li>
<p>History</p>
<ul>
<li>
<p>Keep last: 只缓存最新的<code>N</code><div class="copy-code" style="display: none">N</div><button class="copy-btn js_login">登录后复制</button>个数据，<code>N</code><div class="copy-code" style="display: none">N</div><button class="copy-btn js_login">登录后复制</button>可通过<code>Depth</code><div class="copy-code" style="display: none">Depth</div><button class="copy-btn js_login">登录后复制</button>的<code>Queue size</code><div class="copy-code" style="display: none">Queue size</div><button class="copy-btn js_login">登录后复制</button>配置。</p>
<ul>
<li>Keep all: 缓存所有的数据，但是受限于DDS底层的资源限制。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>Depth</p>
<ul>
<li>Queue size: 当<code>History</code><div class="copy-code" style="display: none">History</div><button class="copy-btn js_login">登录后复制</button>设置为<code>Keep last</code><div class="copy-code" style="display: none">Keep last</div><button class="copy-btn js_login">登录后复制</button>时有效。</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-none" style="white-space: pre-wrap;" tabindex="0"><code class="lang-c++ language-none">QoS &amp;
QoS::keep_last(size_t depth)
{
  rmw_qos_profile_.history = RMW_QOS_POLICY_HISTORY_KEEP_LAST;
  rmw_qos_profile_.depth = depth;
  return *this;
}
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">QoS &amp;
QoS::keep_last(size_t depth)
{
  rmw_qos_profile_.history = RMW_QOS_POLICY_HISTORY_KEEP_LAST;
  rmw_qos_profile_.depth = depth;
  return *this;
}
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<ul>
<li>
<p>Reliability</p>
<ul>
<li>
<p>Best effort: 尽力传送数据，但是网络不稳定可能会丢弃一些数据。</p>
</li>
<li>
<p>Reliable: 确保数据被传送到，可能会重传多次，导致数据延时严重。</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>Durability</p>
<ul>
<li>Transient local: 为后订阅话题的订阅者保留数据，比如<code>map_server</code><div class="copy-code" style="display: none">map_server</div><button class="copy-btn js_login">登录后复制</button>发布<code>map</code><div class="copy-code" style="display: none">map</div><button class="copy-btn js_login">登录后复制</button>的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>策略。</li>
<li>Volatile: 不为后订阅话题的订阅者保留数据，比如订阅传感器数据的节点。</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-none" style="white-space: pre-wrap;" tabindex="0"><code class="lang-c++ language-none">  // Create a publisher using the QoS settings to emulate a ROS1 latched topic
  occ_pub_ = create_publisher&lt;nav_msgs::msg::OccupancyGrid&gt;(
    topic_name,
    rclcpp::QoS(rclcpp::KeepLast(1)).transient_local().reliable());
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">  // Create a publisher using the QoS settings to emulate a ROS1 latched topic
  occ_pub_ = create_publisher&lt;nav_msgs::msg::OccupancyGrid&gt;(
    topic_name,
    rclcpp::QoS(rclcpp::KeepLast(1)).transient_local().reliable());
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<ul>
<li>
<p>Deadline</p>
<ul>
<li>Duration: 设置数据被发布的间隔时间。比如：像<code>cmd_vel</code><div class="copy-code" style="display: none">cmd_vel</div><button class="copy-btn js_login">登录后复制</button>等控制命令就希望是固定间隔时间下发的。</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>Lifespan</p>
<ul>
<li>Duration: 设置数据从发布到被接收的最大间隔时间。超过该时间将被认为是过时的数据，直接丢弃了。这对于传感器数据来说是很重要的。因为过时的传感器数据毫无用处。</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>Liveliness</p>
<ul>
<li>Automatic: 一个节点可能有多个发布器。只要有一个发布器发布了数据，系统将认为该节点的所有发布器在接下来的<code>lease duration</code><div class="copy-code" style="display: none">lease duration</div><button class="copy-btn js_login">登录后复制</button>时间段内是活跃的。</li>
<li>Manual by topic: 如果手动确认发布器仍然是活跃的，系统将认为该发布器在接下来的<code>lease duration</code><div class="copy-code" style="display: none">lease duration</div><button class="copy-btn js_login">登录后复制</button>时间段内是活跃的。</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>Lease Duration</p>
<ul>
<li>Duration: 在这个时间段内，发布器需发布数据，不然会被系统认为是停止工作了。该参数与<code>Liveliness</code><div class="copy-code" style="display: none">Liveliness</div><button class="copy-btn js_login">登录后复制</button>配合使用。</li>
</ul>
</li>
</ul>
<h3 id="h3--qos-"><a name="不兼容的Qos策略" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>不兼容的Qos策略</h3>
<p>知道了所有的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>的配置项目后，哪些跟哪些配置是不兼容的呢？</p>
<p>这里有一张对比表帮助我们避免不兼容的Qos策略设置。</p>
<p><a href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_88720.png" class="fancy-box" data-fancybox="gallery"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_88720.png" alt=""></a><br>表中的<code>x</code><div class="copy-code" style="display: none">x</div><button class="copy-btn js_login">登录后复制</button>表示人为设定了某个值，<code>Default</code><div class="copy-code" style="display: none">Default</div><button class="copy-btn js_login">登录后复制</button>值根据不同的<code>DDS</code><div class="copy-code" style="display: none">DDS</div><button class="copy-btn js_login">登录后复制</button>有不同的设定。通常是下面两种：</p>
<pre class="line-numbers language-none" style="white-space: pre-wrap;" tabindex="0"><code class="lang-c++ language-none">/// Constant representing an infinite duration. Use rmw_time_equal for comparisons.
/**
  * Different RMW implementations have different representations for infinite durations.
  * This value is reported for QoS policy durations that are left unspecified.
  * Do not directly compare `sec == sec &amp;&amp; nsec == nsec`, because we don't want to be sensitive
  * to non-normalized values (nsec &gt; 1 second) - use rmw_time_equal instead.
  * This value is INT64_MAX nanoseconds = 0x7FFF FFFF FFFF FFFF = d 9 223 372 036 854 775 807
  *
  * Note: these constants cannot be `static const rmw_time_t` because in C that can't be used
  * as a compile-time initializer
  */
#define RMW_DURATION_INFINITE {9223372036LL, 854775807LL}
#define RMW_DURATION_UNSPECIFIED {0LL, 0LL}
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">/// Constant representing an infinite duration. Use rmw_time_equal for comparisons.
/**
  * Different RMW implementations have different representations for infinite durations.
  * This value is reported for QoS policy durations that are left unspecified.
  * Do not directly compare `sec == sec &amp;&amp; nsec == nsec`, because we don't want to be sensitive
  * to non-normalized values (nsec &gt; 1 second) - use rmw_time_equal instead.
  * This value is INT64_MAX nanoseconds = 0x7FFF FFFF FFFF FFFF = d 9 223 372 036 854 775 807
  *
  * Note: these constants cannot be `static const rmw_time_t` because in C that can't be used
  * as a compile-time initializer
  */
#define RMW_DURATION_INFINITE {9223372036LL, 854775807LL}
#define RMW_DURATION_UNSPECIFIED {0LL, 0LL}
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<h3 id="h3--qos-"><a name="查询话题的Qos策略" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>查询话题的Qos策略</h3>
<p>用下面的命令查询</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash">ros2 topic info /scan --verbose
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">ros2 topic info /scan --verbose
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<p>输出示例：</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash">Type: sensor_msgs/msg/LaserScan

Publisher count: <span class="token number">1</span>

Node name: laserscan
Node namespace: /
Topic type: sensor_msgs/msg/LaserScan
Endpoint type: PUBLISHER
GID: <span class="token number">71.03</span>.10.01.8b.5b.f9.27.8e.9d.a4.4e.00.00.6c.03.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: BEST_EFFORT
  Durability: VOLATILE
  Lifespan: <span class="token number">9223372036854775807</span> nanoseconds
  Deadline: <span class="token number">9223372036854775807</span> nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: <span class="token number">9223372036854775807</span> nanoseconds

Subscription count: <span class="token number">0</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">Type: sensor_msgs/msg/LaserScan

Publisher count: 1

Node name: laserscan
Node namespace: /
Topic type: sensor_msgs/msg/LaserScan
Endpoint type: PUBLISHER
GID: 71.03.10.01.8b.5b.f9.27.8e.9d.a4.4e.00.00.6c.03.00.00.00.00.00.00.00.00
QoS profile:
  Reliability: BEST_EFFORT
  Durability: VOLATILE
  Lifespan: 9223372036854775807 nanoseconds
  Deadline: 9223372036854775807 nanoseconds
  Liveliness: AUTOMATIC
  Liveliness lease duration: 9223372036854775807 nanoseconds

Subscription count: 0
</div><button class="copy-btn js_login" style="display: none;">登录后复制</button></pre>
<p>分析一下:</p>
<ul>
<li><code>Reliability = BEST_EFFORT</code><div class="copy-code" style="display: none">Reliability = BEST_EFFORT</div><button class="copy-btn js_login">登录后复制</button>. 这是在传感器节点中的标准设置方式。因为我们感兴趣的是获得大量的数据，如果丢失一两个信息，其实并不重要。</li>
<li><code>Durability = Volatile</code><div class="copy-code" style="display: none">Durability = Volatile</div><button class="copy-btn js_login">登录后复制</button>. 这也是传感器节点的标准方式，特别是具有高数据量的传感器。我们并不需要为晚加入的节点保存旧的信息。因为旧信息对它根本没有意义了。</li>
<li><code>Liveliness = Automatic</code><div class="copy-code" style="display: none">Liveliness = Automatic</div><button class="copy-btn js_login">登录后复制</button>. 这是默认的设置，特别是对于传感器。我们认为在<code>lease duration</code><div class="copy-code" style="display: none">lease duration</div><button class="copy-btn js_login">登录后复制</button>时间段内，节点发布了任何话题，代表节点是活跃的。</li>
<li><code>Deadline = "9223372036.854775807"</code><div class="copy-code" style="display: none">Deadline = "9223372036.854775807"</div><button class="copy-btn js_login">登录后复制</button> seconds ( INFINITE VALUE ). 这意味着 <strong>没有Deadline限制</strong>.</li>
<li><code>Lifespan = "9223372036.854775807"</code><div class="copy-code" style="display: none">Lifespan = "9223372036.854775807"</div><button class="copy-btn js_login">登录后复制</button> seconds( INFINITE VALUE ). 这意味着 <strong>没有数据有效性限制</strong>. 不管数据延时多久被接受到都认为其是有效。这是从gazebo中发出的数据。仿真环境下这么设置应该没啥关系。但在实际场景下则需要根据需求设置一下。</li>
</ul>
<h3 id="h3--qos"><a name="系统层预设的Qos" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>系统层预设的Qos</h3>
<p>这里以<code>rclcpp</code><div class="copy-code" style="display: none">rclcpp</div><button class="copy-btn js_login">登录后复制</button>为例。</p>
<p><code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>配置的相关接口维护在<code>rclcpp</code><div class="copy-code" style="display: none">rclcpp</div><button class="copy-btn js_login">登录后复制</button>模块中的<code>qos.cpp和qos.hpp</code><div class="copy-code" style="display: none">qos.cpp和qos.hpp</div><button class="copy-btn js_login">登录后复制</button>文件中。<code>/opt/ros/galactic/include/rmw/qos_profiles.h</code><div class="copy-code" style="display: none">/opt/ros/galactic/include/rmw/qos_profiles.h</div><button class="copy-btn js_login">登录后复制</button>中维护了预设的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>结构数据。</p>
<p>这里放置两个瞧瞧。</p>
<pre class="line-numbers language-none" style="white-space: pre-wrap;" tabindex="0"><code class="lang-C++ language-none">/**
 * Sensor Data QoS class
 *    - History: Keep last,
 *    - Depth: 5,
 *    - Reliability: Best effort,
 *    - Durability: Volatile,
 *    - Deadline: Default,
 *    - Lifespan: Default,
 *    - Liveliness: System default,
 *    - Liveliness lease duration: default,
 *    - avoid ros namespace conventions: false
 */
static const rmw_qos_profile_t rmw_qos_profile_sensor_data =
{
  RMW_QOS_POLICY_HISTORY_KEEP_LAST,
  5,
  RMW_QOS_POLICY_RELIABILITY_BEST_EFFORT,
  RMW_QOS_POLICY_DURABILITY_VOLATILE,
  RMW_QOS_DEADLINE_DEFAULT,
  RMW_QOS_LIFESPAN_DEFAULT,
  RMW_QOS_POLICY_LIVELINESS_SYSTEM_DEFAULT,
  RMW_QOS_LIVELINESS_LEASE_DURATION_DEFAULT,
  false
};

/**
 * Parameters QoS class
 *    - History: Keep last,
 *    - Depth: 1000,
 *    - Reliability: Reliable,
 *    - Durability: Volatile,
 *    - Deadline: Default,
 *    - Lifespan: Default,
 *    - Liveliness: System default,
 *    - Liveliness lease duration: default,
 *    - Avoid ros namespace conventions: false
 */
static const rmw_qos_profile_t rmw_qos_profile_parameters =
{
  RMW_QOS_POLICY_HISTORY_KEEP_LAST,
  1000,
  RMW_QOS_POLICY_RELIABILITY_RELIABLE,
  RMW_QOS_POLICY_DURABILITY_VOLATILE,
  RMW_QOS_DEADLINE_DEFAULT,
  RMW_QOS_LIFESPAN_DEFAULT,
  RMW_QOS_POLICY_LIVELINESS_SYSTEM_DEFAULT,
  RMW_QOS_LIVELINESS_LEASE_DURATION_DEFAULT,
  false
};
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">/**
 * Sensor Data QoS class
 *    - History: Keep last,
 *    - Depth: 5,
 *    - Reliability: Best effort,
 *    - Durability: Volatile,
 *    - Deadline: Default,
 *    - Lifespan: Default,
 *    - Liveliness: System default,
 *    - Liveliness lease duration: default,
 *    - avoid ros namespace conventions: false
 */
static const rmw_qos_profile_t rmw_qos_profile_sensor_data =
{
  RMW_QOS_POLICY_HISTORY_KEEP_LAST,
  5,
  RMW_QOS_POLICY_RELIABILITY_BEST_EFFORT,
  RMW_QOS_POLICY_DURABILITY_VOLATILE,
  RMW_QOS_DEADLINE_DEFAULT,
  RMW_QOS_LIFESPAN_DEFAULT,
  RMW_QOS_POLICY_LIVELINESS_SYSTEM_DEFAULT,
  RMW_QOS_LIVELINESS_LEASE_DURATION_DEFAULT,
  false
};

/**
 * Parameters QoS class
 *    - History: Keep last,
 *    - Depth: 1000,
 *    - Reliability: Reliable,
 *    - Durability: Volatile,
 *    - Deadline: Default,
 *    - Lifespan: Default,
 *    - Liveliness: System default,
 *    - Liveliness lease duration: default,
 *    - Avoid ros namespace conventions: false
 */
static const rmw_qos_profile_t rmw_qos_profile_parameters =
{
  RMW_QOS_POLICY_HISTORY_KEEP_LAST,
  1000,
  RMW_QOS_POLICY_RELIABILITY_RELIABLE,
  RMW_QOS_POLICY_DURABILITY_VOLATILE,
  RMW_QOS_DEADLINE_DEFAULT,
  RMW_QOS_LIFESPAN_DEFAULT,
  RMW_QOS_POLICY_LIVELINESS_SYSTEM_DEFAULT,
  RMW_QOS_LIVELINESS_LEASE_DURATION_DEFAULT,
  false
};
</div><button class="copy-btn js_login">登录后复制</button></pre>
<h2 id="h2--qos-"><a name="测试Qos的示例代码" class="reference-link" target="_blank"></a><span class="header-link octicon octicon-link"></span>测试Qos的示例代码</h2>
<p>这里简单说明一种<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>不兼容的情况。</p>
<p>先看订阅器的示例代码</p>
<pre class="line-numbers language-python" style="white-space: pre-wrap;" tabindex="0"><code class="language-python"><span class="token keyword">import</span> rclpy
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>node <span class="token keyword">import</span> Node
<span class="token keyword">from</span> std_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> String

<span class="token comment"># import Quality of Service library, to set the correct profile and reliability.</span>
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos <span class="token keyword">import</span> ReliabilityPolicy<span class="token punctuation">,</span> QoSProfile


<span class="token keyword">class</span> <span class="token class-name">SubscriberQoS</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token string">'subscriber_qos_obj'</span><span class="token punctuation">)</span>

        <span class="token comment"># create the subscriber object</span>
        self<span class="token punctuation">.</span>subscriber <span class="token operator">=</span> self<span class="token punctuation">.</span>create_subscription<span class="token punctuation">(</span>
            String<span class="token punctuation">,</span>
            <span class="token string">'/qos_test'</span><span class="token punctuation">,</span>
            self<span class="token punctuation">.</span>listener_callback<span class="token punctuation">,</span>
            QoSProfile<span class="token punctuation">(</span>depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> reliability<span class="token operator">=</span>ReliabilityPolicy<span class="token punctuation">.</span>RELIABLE<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">listener_callback</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>get_logger<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">"Data Received ="</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    rclpy<span class="token punctuation">.</span>init<span class="token punctuation">(</span>args<span class="token operator">=</span>args<span class="token punctuation">)</span>
    sub_qos_obj <span class="token operator">=</span> SubscriberQoS<span class="token punctuation">(</span><span class="token punctuation">)</span>
    rclpy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span>sub_qos_obj<span class="token punctuation">)</span>
    sub_qos_obj<span class="token punctuation">.</span>destroy_node<span class="token punctuation">(</span><span class="token punctuation">)</span>
    rclpy<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">import rclpy
from rclpy.node import Node
from std_msgs.msg import String

# import Quality of Service library, to set the correct profile and reliability.
from rclpy.qos import ReliabilityPolicy, QoSProfile


class SubscriberQoS(Node):

    def __init__(self):

        super().__init__('subscriber_qos_obj')

        # create the subscriber object
        self.subscriber = self.create_subscription(
            String,
            '/qos_test',
            self.listener_callback,
            QoSProfile(depth=10, reliability=ReliabilityPolicy.RELIABLE))

    def listener_callback(self, msg):
        self.get_logger().info("Data Received ="+str(msg.data))


def main(args=None):
    rclpy.init(args=args)
    sub_qos_obj = SubscriberQoS()
    rclpy.spin(sub_qos_obj)
    sub_qos_obj.destroy_node()
    rclpy.shutdown()


if __name__ == '__main__':
    main()
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>再看看发布器的代码</p>
<pre class="line-numbers language-python" style="white-space: pre-wrap;" tabindex="0"><code class="language-python"><span class="token keyword">import</span> argparse
<span class="token keyword">import</span> rclpy
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>node <span class="token keyword">import</span> Node
<span class="token keyword">from</span> std_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> String
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos_event <span class="token keyword">import</span> PublisherEventCallbacks
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>duration <span class="token keyword">import</span> Duration
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos <span class="token keyword">import</span> QoSProfile
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos <span class="token keyword">import</span> QoSDurabilityPolicy
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos <span class="token keyword">import</span> QoSLivelinessPolicy
<span class="token keyword">from</span> rclpy<span class="token punctuation">.</span>qos <span class="token keyword">import</span> QoSReliabilityPolicy


<span class="token keyword">class</span> <span class="token class-name">PublisherQoS</span><span class="token punctuation">(</span>Node<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> qos_profile<span class="token punctuation">,</span> node_name<span class="token operator">=</span><span class="token string">"publisher_qos_obj"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>node_name<span class="token punctuation">)</span>
        <span class="token comment"># create the publisher object</span>
        <span class="token comment">#  create_publisher(msg_type, topic, qos_profile, *, callback_group=None, event_callbacks=None)</span>
        <span class="token comment"># INFO: https://docs.ros2.org/foxy/api/rclpy/api/node.html</span>

        rclpy<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>set_logger_level<span class="token punctuation">(</span>
            node_name<span class="token punctuation">,</span> rclpy<span class="token punctuation">.</span>logging<span class="token punctuation">.</span>LoggingSeverity<span class="token punctuation">.</span>INFO<span class="token punctuation">)</span>

        event_callbacks <span class="token operator">=</span> PublisherEventCallbacks<span class="token punctuation">(</span>
            incompatible_qos<span class="token operator">=</span>self<span class="token punctuation">.</span>incompatible_qos_clb<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>publisher_ <span class="token operator">=</span> self<span class="token punctuation">.</span>create_publisher<span class="token punctuation">(</span>msg_type<span class="token operator">=</span>String<span class="token punctuation">,</span>
                                                topic<span class="token operator">=</span><span class="token string">'/qos_test'</span><span class="token punctuation">,</span>
                                                qos_profile<span class="token operator">=</span>qos_profile<span class="token punctuation">,</span>
                                                event_callbacks<span class="token operator">=</span>event_callbacks<span class="token punctuation">)</span>

        <span class="token comment"># This is the Unique id for each of the messages that will be sent</span>
        self<span class="token punctuation">.</span>msgs_id <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment">#self.current_time = self.get_clock().now()</span>
        self<span class="token punctuation">.</span>current_time_s <span class="token operator">=</span> <span class="token number">0</span>
        self<span class="token punctuation">.</span>current_time_ns <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token comment"># define the timer period for 0.5 seconds</span>
        timer_period <span class="token operator">=</span> <span class="token number">0.5</span>
        <span class="token comment"># create a timer sending two parameters:</span>
        <span class="token comment"># - the duration between 2 callbacks (0.5 seeconds)</span>
        <span class="token comment"># - the timer function (timer_callback)</span>
        self<span class="token punctuation">.</span>timer <span class="token operator">=</span> self<span class="token punctuation">.</span>create_timer<span class="token punctuation">(</span>timer_period<span class="token punctuation">,</span> self<span class="token punctuation">.</span>timer_callback<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">incompatible_qos_clb</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        This is the callback that will be executed when the Event of **Incompatible QoS** is
        triggered.
        """</span>
        self<span class="token punctuation">.</span>get_logger<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">"A subscriber is asking for an INCOMPATIBLE QoS Triggered!!"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>get_logger<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>last_policy_kind<span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>get_logger<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">"############################"</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">timer_callback</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Here we have the callback method</span>
        msg <span class="token operator">=</span> String<span class="token punctuation">(</span><span class="token punctuation">)</span>
        test_time <span class="token operator">=</span> self<span class="token punctuation">.</span>get_clock<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>current_time_s<span class="token punctuation">,</span> self<span class="token punctuation">.</span>current_time_ns <span class="token operator">=</span> test_time<span class="token punctuation">.</span>seconds_nanoseconds<span class="token punctuation">(</span><span class="token punctuation">)</span>
        time_str <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time_s<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>current_time_ns<span class="token punctuation">)</span>
        dds_msg_str <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>msgs_id<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>time_str
        msg<span class="token punctuation">.</span>data <span class="token operator">=</span> dds_msg_str
        <span class="token comment"># Publish the message to the topic</span>
        self<span class="token punctuation">.</span>publisher_<span class="token punctuation">.</span>publish<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token comment"># Display the message on the console</span>
        self<span class="token punctuation">.</span>get_logger<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'Publishing: "%s"'</span> <span class="token operator">%</span> msg<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>msgs_id <span class="token operator">+=</span> <span class="token number">1</span>


<span class="token keyword">def</span> <span class="token function">get_parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span>
        <span class="token string">'-reliability'</span><span class="token punctuation">,</span>
        <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span>
        choices<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'best_effort'</span><span class="token punctuation">,</span> <span class="token string">'reliable'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">'Select Policy for reliability, use ros2 run dds_tests_pkg publisher_dds_custom_qos_exe -reliability best_effort|reliable'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> parser


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token comment"># Lets parse the arguments</span>
    parser <span class="token operator">=</span> get_parser<span class="token punctuation">(</span><span class="token punctuation">)</span>
    parsed_args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Configuration variables</span>
    reliability <span class="token operator">=</span> parsed_args<span class="token punctuation">.</span>reliability
    <span class="token keyword">print</span><span class="token punctuation">(</span>reliability<span class="token punctuation">)</span>
    qos_profile_publisher <span class="token operator">=</span> QoSProfile<span class="token punctuation">(</span>depth<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token comment"># Options  QoSDurabilityPolicy.VOLATILE, QoSDurabilityPolicy.TRANSIENT_LOCAL,</span>
    qos_profile_publisher<span class="token punctuation">.</span>durability <span class="token operator">=</span> QoSDurabilityPolicy<span class="token punctuation">.</span>VOLATILE

    qos_profile_publisher<span class="token punctuation">.</span>deadline <span class="token operator">=</span> Duration<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token comment"># Options QoSLivelinessPolicy.MANUAL_BY_TOPIC, QoSLivelinessPolicy.AUTOMATIC</span>
    qos_profile_publisher<span class="token punctuation">.</span>liveliness <span class="token operator">=</span> QoSLivelinessPolicy<span class="token punctuation">.</span>AUTOMATIC

    qos_profile_publisher<span class="token punctuation">.</span>liveliness_lease_duration <span class="token operator">=</span> Duration<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

    <span class="token comment"># Options: QoSReliabilityPolicy.RELIABLE, QoSReliabilityPolicy.BEST_EFFORT</span>
    <span class="token keyword">if</span> reliability <span class="token operator">==</span> <span class="token string">"reliable"</span><span class="token punctuation">:</span>
        qos_profile_publisher<span class="token punctuation">.</span>reliability <span class="token operator">=</span> QoSReliabilityPolicy<span class="token punctuation">.</span>RELIABLE
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        qos_profile_publisher<span class="token punctuation">.</span>reliability <span class="token operator">=</span> QoSReliabilityPolicy<span class="token punctuation">.</span>BEST_EFFORT

    <span class="token comment"># initialize the ROS communication</span>
    rclpy<span class="token punctuation">.</span>init<span class="token punctuation">(</span>args<span class="token operator">=</span>args<span class="token punctuation">)</span>
    <span class="token comment"># declare the node constructor</span>
    pub_qos_obj <span class="token operator">=</span> PublisherQoS<span class="token punctuation">(</span>qos_profile_publisher<span class="token punctuation">)</span>
    <span class="token comment"># pause the program execution, waits for a request to kill the node (ctrl+c)</span>
    rclpy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span>pub_qos_obj<span class="token punctuation">)</span>
    <span class="token comment"># Explicity destroy the node</span>
    pub_qos_obj<span class="token punctuation">.</span>destroy_node<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># shutdown the ROS communication</span>
    rclpy<span class="token punctuation">.</span>shutdown<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">import argparse
import rclpy
from rclpy.node import Node
from std_msgs.msg import String
from rclpy.qos_event import PublisherEventCallbacks
from rclpy.duration import Duration
from rclpy.qos import QoSProfile
from rclpy.qos import QoSDurabilityPolicy
from rclpy.qos import QoSLivelinessPolicy
from rclpy.qos import QoSReliabilityPolicy


class PublisherQoS(Node):

    def __init__(self, qos_profile, node_name="publisher_qos_obj"):

        super().__init__(node_name)
        # create the publisher object
        #  create_publisher(msg_type, topic, qos_profile, *, callback_group=None, event_callbacks=None)
        # INFO: https://docs.ros2.org/foxy/api/rclpy/api/node.html

        rclpy.logging.set_logger_level(
            node_name, rclpy.logging.LoggingSeverity.INFO)

        event_callbacks = PublisherEventCallbacks(
            incompatible_qos=self.incompatible_qos_clb)

        self.publisher_ = self.create_publisher(msg_type=String,
                                                topic='/qos_test',
                                                qos_profile=qos_profile,
                                                event_callbacks=event_callbacks)

        # This is the Unique id for each of the messages that will be sent
        self.msgs_id = 0
        #self.current_time = self.get_clock().now()
        self.current_time_s = 0
        self.current_time_ns = 0
        # define the timer period for 0.5 seconds
        timer_period = 0.5
        # create a timer sending two parameters:
        # - the duration between 2 callbacks (0.5 seeconds)
        # - the timer function (timer_callback)
        self.timer = self.create_timer(timer_period, self.timer_callback)

    def incompatible_qos_clb(self, event):
        """
        This is the callback that will be executed when the Event of **Incompatible QoS** is
        triggered.
        """
        self.get_logger().error("A subscriber is asking for an INCOMPATIBLE QoS Triggered!!")
        self.get_logger().error(str(event.last_policy_kind))
        self.get_logger().error("############################")

    def timer_callback(self):
        # Here we have the callback method
        msg = String()
        test_time = self.get_clock().now()
        self.current_time_s, self.current_time_ns = test_time.seconds_nanoseconds()
        time_str = str(self.current_time_s)+","+str(self.current_time_ns)
        dds_msg_str = str(self.msgs_id)+":"+time_str
        msg.data = dds_msg_str
        # Publish the message to the topic
        self.publisher_.publish(msg)
        # Display the message on the console
        self.get_logger().info('Publishing: "%s"' % msg)

        self.msgs_id += 1


def get_parser():
    parser = argparse.ArgumentParser()
    parser.add_argument(
        '-reliability',
        type=str,
        choices=['best_effort', 'reliable'],
        help='Select Policy for reliability, use ros2 run dds_tests_pkg publisher_dds_custom_qos_exe -reliability best_effort|reliable')
    return parser


def main(args=None):

    # Lets parse the arguments
    parser = get_parser()
    parsed_args = parser.parse_args()

    # Configuration variables
    reliability = parsed_args.reliability
    print(reliability)
    qos_profile_publisher = QoSProfile(depth=10)

    # Options  QoSDurabilityPolicy.VOLATILE, QoSDurabilityPolicy.TRANSIENT_LOCAL,
    qos_profile_publisher.durability = QoSDurabilityPolicy.VOLATILE

    qos_profile_publisher.deadline = Duration(seconds=2)

    # Options QoSLivelinessPolicy.MANUAL_BY_TOPIC, QoSLivelinessPolicy.AUTOMATIC
    qos_profile_publisher.liveliness = QoSLivelinessPolicy.AUTOMATIC

    qos_profile_publisher.liveliness_lease_duration = Duration(seconds=2)

    # Options: QoSReliabilityPolicy.RELIABLE, QoSReliabilityPolicy.BEST_EFFORT
    if reliability == "reliable":
        qos_profile_publisher.reliability = QoSReliabilityPolicy.RELIABLE
    else:
        qos_profile_publisher.reliability = QoSReliabilityPolicy.BEST_EFFORT

    # initialize the ROS communication
    rclpy.init(args=args)
    # declare the node constructor
    pub_qos_obj = PublisherQoS(qos_profile_publisher)
    # pause the program execution, waits for a request to kill the node (ctrl+c)
    rclpy.spin(pub_qos_obj)
    # Explicity destroy the node
    pub_qos_obj.destroy_node()
    # shutdown the ROS communication
    rclpy.shutdown()


if __name__ == '__main__':
    main()
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>按照下面的方式启动能正常收发</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">RMW_IMPLEMENTATION</span><span class="token operator">=</span>rmw_cyclonedds_cpp  <span class="token comment">#指定中间通信件</span>
ros2 run qos_tests_pkg publisher_custom_minimal_qos_exe -reliability reliable
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  #指定中间通信件
ros2 run qos_tests_pkg publisher_custom_minimal_qos_exe -reliability reliable
</div><button class="copy-btn js_login">登录后复制</button></pre>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">RMW_IMPLEMENTATION</span><span class="token operator">=</span>rmw_cyclonedds_cpp  <span class="token comment">#指定中间通信件</span>
ros2 run qos_tests_pkg subscriber_custom_minimal_qos_exe
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  #指定中间通信件
ros2 run qos_tests_pkg subscriber_custom_minimal_qos_exe
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>两边命令窗口的打印均正常</p>
<p>发布命令窗口</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash">reliable
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.014033825</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='0:1644578722,985456932')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.486186513</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='1:1644578723,485332074')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.986142873</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='2:1644578723,985345254')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578724.486645546</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='3:1644578724,485467771')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578724.986427990</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='4:1644578724,985333069')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578725.486563859</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='5:1644578725,485435341')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578725.986608071</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='6:1644578725,985460097')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578726.486474454</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='7:1644578726,485332301')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578726.986147983</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='8:1644578726,985357784')"</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">reliable
[INFO] [1644578723.014033825] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='0:1644578722,985456932')"
[INFO] [1644578723.486186513] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='1:1644578723,485332074')"
[INFO] [1644578723.986142873] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='2:1644578723,985345254')"
[INFO] [1644578724.486645546] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='3:1644578724,485467771')"
[INFO] [1644578724.986427990] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='4:1644578724,985333069')"
[INFO] [1644578725.486563859] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='5:1644578725,485435341')"
[INFO] [1644578725.986608071] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='6:1644578725,985460097')"
[INFO] [1644578726.486474454] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='7:1644578726,485332301')"
[INFO] [1644578726.986147983] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='8:1644578726,985357784')"
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>接收命令窗口</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.015739998</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">0</span>:1644578722,985456932
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.486751033</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">1</span>:1644578723,485332074
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578723.986497548</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">2</span>:1644578723,985345254
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578724.486954816</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">3</span>:1644578724,485467771
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578724.986790852</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">4</span>:1644578724,985333069
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578725.486864984</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">5</span>:1644578725,485435341
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578725.986921274</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">6</span>:1644578725,985460097
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578726.486804679</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">7</span>:1644578726,485332301
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578726.986422874</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: Data Received <span class="token operator">=</span><span class="token number">8</span>:1644578726,985357784
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">[INFO] [1644578723.015739998] [subscriber_qos_obj]: Data Received =0:1644578722,985456932
[INFO] [1644578723.486751033] [subscriber_qos_obj]: Data Received =1:1644578723,485332074
[INFO] [1644578723.986497548] [subscriber_qos_obj]: Data Received =2:1644578723,985345254
[INFO] [1644578724.486954816] [subscriber_qos_obj]: Data Received =3:1644578724,485467771
[INFO] [1644578724.986790852] [subscriber_qos_obj]: Data Received =4:1644578724,985333069
[INFO] [1644578725.486864984] [subscriber_qos_obj]: Data Received =5:1644578725,485435341
[INFO] [1644578725.986921274] [subscriber_qos_obj]: Data Received =6:1644578725,985460097
[INFO] [1644578726.486804679] [subscriber_qos_obj]: Data Received =7:1644578726,485332301
[INFO] [1644578726.986422874] [subscriber_qos_obj]: Data Received =8:1644578726,985357784
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>按<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>不兼容的方式启动</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">RMW_IMPLEMENTATION</span><span class="token operator">=</span>rmw_cyclonedds_cpp  <span class="token comment">#指定中间通信件</span>
ros2 run qos_tests_pkg publisher_custom_minimal_qos_exe -reliability best_effort
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  #指定中间通信件
ros2 run qos_tests_pkg publisher_custom_minimal_qos_exe -reliability best_effort
</div><button class="copy-btn js_login">登录后复制</button></pre>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">RMW_IMPLEMENTATION</span><span class="token operator">=</span>rmw_cyclonedds_cpp  <span class="token comment">#指定中间通信件</span>
ros2 run qos_tests_pkg subscriber_custom_minimal_qos_exe
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 24px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp  #指定中间通信件
ros2 run qos_tests_pkg subscriber_custom_minimal_qos_exe
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>这时两边的命令窗口都将出现<code>incompatible QoS</code><div class="copy-code" style="display: none">incompatible QoS</div><button class="copy-btn js_login">登录后复制</button>等字符。</p>
<p>发布命令窗口</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash">best_effort
<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578813.964901713</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: A subscriber is asking <span class="token keyword">for</span> an INCOMPATIBLE QoS Triggered<span class="token operator">!</span><span class="token operator">!</span>
<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578813.965861273</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: rmw_qos_policy_kind_t.RMW_QOS_POLICY_RELIABILITY
<span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578813.966438368</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: <span class="token comment">############################</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578814.439657635</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='0:1644578814,438408983')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578814.939157191</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='1:1644578814,938248853')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578815.439442102</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='2:1644578815,438273310')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578815.939210872</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='3:1644578815,938319227')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578816.439078646</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='4:1644578816,438258510')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578816.939358849</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='5:1644578816,938258582')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578817.439420153</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='6:1644578817,438366411')"</span>
<span class="token punctuation">[</span>INFO<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578817.939196207</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>publisher_qos_obj<span class="token punctuation">]</span>: Publishing: <span class="token string">"std_msgs.msg.String(data='7:1644578817,938358924')"</span>
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 24px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span><span style="height: 48px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">best_effort
[ERROR] [1644578813.964901713] [publisher_qos_obj]: A subscriber is asking for an INCOMPATIBLE QoS Triggered!!
[ERROR] [1644578813.965861273] [publisher_qos_obj]: rmw_qos_policy_kind_t.RMW_QOS_POLICY_RELIABILITY
[ERROR] [1644578813.966438368] [publisher_qos_obj]: ############################
[INFO] [1644578814.439657635] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='0:1644578814,438408983')"
[INFO] [1644578814.939157191] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='1:1644578814,938248853')"
[INFO] [1644578815.439442102] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='2:1644578815,438273310')"
[INFO] [1644578815.939210872] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='3:1644578815,938319227')"
[INFO] [1644578816.439078646] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='4:1644578816,438258510')"
[INFO] [1644578816.939358849] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='5:1644578816,938258582')"
[INFO] [1644578817.439420153] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='6:1644578817,438366411')"
[INFO] [1644578817.939196207] [publisher_qos_obj]: Publishing: "std_msgs.msg.String(data='7:1644578817,938358924')"
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>接收命令窗口</p>
<pre class="line-numbers language-bash" style="white-space: pre-wrap;" tabindex="0"><code class="language-bash"><span class="token punctuation">[</span>WARN<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">1644578813.965216245</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>subscriber_qos_obj<span class="token punctuation">]</span>: New publisher discovered on topic <span class="token string">'/qos_test'</span>, offering incompatible QoS. No messages will be received from it. Last incompatible policy: RELIABILITY
<span aria-hidden="true" class="line-numbers-rows"><span style="height: 72px;"></span></span><span class="line-numbers-sizer" style="display: none;"></span></code><div class="copy-code" style="display: none">[WARN] [1644578813.965216245] [subscriber_qos_obj]: New publisher discovered on topic '/qos_test', offering incompatible QoS. No messages will be received from it. Last incompatible policy: RELIABILITY
</div><button class="copy-btn js_login">登录后复制</button></pre>
<p>原因是发布器和订阅器的<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>配置不兼容。</p>
<p>发布器：<code>QoS Reliability=Best_Effort</code><div class="copy-code" style="display: none">QoS Reliability=Best_Effort</div><button class="copy-btn js_login">登录后复制</button></p>
<p>订阅器：<code>QoS Reliability=Reliable</code><div class="copy-code" style="display: none">QoS Reliability=Reliable</div><button class="copy-btn js_login">登录后复制</button></p>
<p>如果想动手测试不同<code>Qos</code><div class="copy-code" style="display: none">Qos</div><button class="copy-btn js_login">登录后复制</button>配置的效果，可下载我收集整理的开源代码。在公众号《<strong>首飞</strong>》后台回复“qos”即可。</p>
<p><a href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_22600.png" class="fancy-box" data-fancybox="gallery"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_22600.png" alt=""></a></p>
<hr>
<p><strong>觉得有用就点赞吧！</strong></p>
<p>我是首飞，一个帮大家<strong>填坑</strong>的机器人开发攻城狮。</p>
<p>另外在公众号《<strong>首飞</strong>》内回复“机器人”获取精心推荐的C/C++，Python，Docker，Qt，ROS1/2等机器人行业常用技术资料。</p>
<p><a href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_54089.jpg" class="fancy-box" data-fancybox="gallery"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/20220424_54089.jpg" alt=""></a></p>                    </div>
                    <!--  编辑器结束 -->
                    <div class="pd-20">
                        <div class="post-group">
                            <a href="javascript:;" class="line-btn">ROS2入门</a><a href="javascript:;" class="line-btn">ROS2教学</a>                        </div>
                        <p class="mb-20">
                            <span class="black mr-10">原创文章</span>作者：首飞。如若转载，请注明出处：古月居
                                    http://www.guyuehome.com/37657<!--/blog/detail/id/6187-->                        </p>
                        <div class="detail-bot">
                            <a href="javascript:;" class="item js_reward js_login">
                                <div class="round">
                                    <i class="icon-blog-integral"></i>
                                </div>
                                <p class="gray-5">打赏&nbsp;<span class="reward-num">0</span></p>
                            </a>
                            <a href="javascript:;" data-id="6187" data-type="1" class="like-action-btn item js_login">
                                <div class="round">
                                    <i class="icon-blog-like"></i>
                                </div>
                                <p class="gray-5">点赞&nbsp;<span class="like-num">0</span></p>
                            </a>
                            <a href="javascript:;" data-id="6187" data-type="1" class="follow-action-btn item js_login">
                                <div class="round">
                                    <i class="icon-blog-collect"></i>
                                </div>
                                <p class="gray-5">收藏&nbsp;<span class="collect-num">0</span></p>
                            </a>
                            <!--<a href="javascript:;" class="item">
                                <div class="round">
                                    <i class="icon-blog-share"></i>
                                </div>
                                <p class="gray-5">分享</p>
                            </a>-->
                            <div class="item js_share">
                                <div class="round">
                                    <i class="icon-blog-share"></i>
                                </div>
                                <p class="gray-5">分享</p>
                                <div id="share_box" class="share-box" style="z-index: 99;">
                                    <!--/blog/detail/id/6187-->
                                    <div class="social-share share-component" data-initialized="true" style="text-align: center;" data-url="http://www.guyuehome.com/37657?share=" data-title="Rviz显示不出数据了！一文搞懂Qos">
                                        <a href="javascript:" class="social-share-icon icon-wechat"><i class="icon-share-wechat"></i>微信<div class="wechat-qrcode"><h4>微信扫一扫：分享</h4><div class="qrcode" title="http://www.guyuehome.com/37657?share="><canvas width="100" height="100" style="display: none;"></canvas><img alt="Scan me!" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAABoBJREFUeF7tneFyozAMhJP3f+jepFMaw0j+doXpJa3u52Fso5VWKxnS++12+7gt+PfxoU9zv9+/Vxzv2/4/m2u8b5tgxVj18Wnf6jyzcQ/L6JaczNSArIDjdvsGxDHouPRPenW0VhQ1mWmiaBzHkg0oQuj+bF/jvA3IYCUyaAPy4NMhN/3ZCCEaICNFlJZRQ+Z123jneoXFicYUSqs4SrZuSFkNSAwtKboquJhDGpBfDAjRSERJFYd4rBN5sJOIHXok2q4+w+WU1YBwtF1OWZl3OB6sJnVF20djtr04UUHC5GVzSANyu70UZTUgiwEh3ndaJ9WxM8oi78sSPNVHSs0R2YbaR2RPzCE0QdXIlY1XVFgDkkjOI7ANSOzqYYQ4UTFTLY9rZ7X/2fvHPWTKh1QWtUMcReXY9pLzkLMGPXv/WwPyQT1nB96vsWTQbMpKnZIlanWuFXVIwUTpLfcGJD5OjlReVYU5gDUgyfn+SwES6XxqPTs0RPUAJUyHZYmSiPKUmmebgwSEEilhhDQgz85xA5Ic21b5++0iJHoNiHr9FHrkVVVKosKyYvwVVKzuS6HasA5pQGrNQQK3AZmEsurVilhR55IA2eoQKuYc9ImyKB+saN+TkVRZS3YZG5n03A2I0PQk8F8CEErahDQ9JNUhzvqKwWbNUPJqiuZsr868O3tElOUYJBrbgLAoSIFsQJ69rLOOeDbyH/fLsre6Wac2oDUoGh25TucdTjuE6Ek9e2lAzK7AynyF7/ZmyYvQjzyJGnaVSFCS56+IEKpDIr1eVVkVIOigiQq3qsAgmomcjrq9inN/d3uJ6+n6ioQ2k6fu/JFBScJGz6g8N+Uj2ksoex2aiZAm71Cigx6MEm1kcMUrZ3ujRujjXopiAmS3RnSES17RgOwhbECCz9yOXk5eqUTs0ftX5qNURKmFYZWSKtHmKD4SGKTOrmqaUr5K99WAxJ/pq/lMiTTHaUKVRWqHvP6sQOgIObz+6YQbeRKpFMt7vl7ZUe4hdUU5Rlnj6LhOJZ9W6kRZtLEG5AnLUkCo8CJgFC515HJUc0RrVI2wzUXKSaHnyCkde45rnH4vSwFi9vBnKa0BcRA4jO0IeRoEu71OneEYlqpYp93hNPxUeqPkrwgcsgfR447ethflGhAOfSoiCTwFfPzhANXDzwI6tilWJNq3jZBV34eQEZVikUKfJDb7+HxEVUmqKkuZf9n3IQ1I3IZ/uAABtnPWjpBY+TjRRgan60sBqdAIJcfqdTVvjF5bTcREPyr9jrnzc19nI6QBiWOpDAjJXrWF4STtlRHgtChobGRa2mumDkmdpvM2IDXlFbVsqO9F1z8pqwF5UUCy5KZUl8fERPTlSGRK1Jk5K+cd5MHUyKRGKQmIXYQ0IPlvtGy2aUAS91ei9m0jhN7LUlWWQkMkBav0FO2R5LjaOSYaG2saRZGRPZcdUDUg3Dr50RyiLBZxceW+qzrL0bxKoiZ6tOob9YcD5uJwf7XSVpgptSOQDYiDxoIvX7Pl1LygVOSUQ2itKLIVsbEsh5DerxrBoSxK+lXKUUUB1VfV67v7VJXVgOwtQOrLud6AJN5FEVaNAGo0hoA4iDobjx6ClAslbYWrVeVDtQMJFKUOsaj27DeG1mlY8G4uFYvUVSUqJfBeDpBV3V6lMKQ6hBSIKfY+hzv9JxImFC3EMsr+l7XfGxBuTjYg7xghJHsdhTDT84p3OJRAa1Hh5yRalWqdfJYJF2wuNiBPM5NAaEAmv1XyqyJEoZfZGFI2471EU6R8srlIjle9XVWCNL9FWQ0IW4AcqQER/m6uE20EyWWAXPH31KkmoetkDKUAI8pS16A2TtY6oQ5E5hyX/0GXiOMbkL07jPb4739P3eFa8urI6xQPV+dVInNWs1Df7DPaol6WusEsXImrqdtbVWENiPAxCnFpR8i+ByY3F6t6v9KiqETo4x6nq3C2cHT2GNUuaa2mtt8bkPqPIzcgg/eQojubqJ1IUQTGJZS18iGrx8WqoQiwTKDQvhwb7Na4grKczThJ/WyxR/mM1B316JQIIEe5PEJoAxUJTIahNZXrlPQr6lEBrAFJ0GlAJr9qd1Qpfy5ClJA+tgiUtoDqddVOaqUOcboKSoJX81Rqr59snTQgT7gakIPrqtHkRH7GLCQAQtnr0FQ01tk45QCiLOfBScquoCyyXcQM6TNccUBFXNuA5BBeckDVgOwN7kTIP6IMdxPBcfAUAAAAAElFTkSuQmCC" style="display: block;"></div><div class="help"><p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p></div></div></a>
                                        <a href="http://service.weibo.com/share/share.php?url=http%3A%2F%2Fwww.guyuehome.com%2F37657%3Fshare%3D&amp;title=Rviz%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%81%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82Qos&amp;pic=https%3A%2F%2Fwww.guyuehome.com%2FApplication%2FHome%2FView%2Fdefault%2FPublic%2Fimages%2Flogo.png&amp;appkey=" class="social-share-icon icon-weibo" target="_blank"><i class="icon-share-weibo"></i>微博</a>
                                        <a href="http://connect.qq.com/widget/shareqq/index.html?url=http%3A%2F%2Fwww.guyuehome.com%2F37657%3Fshare%3D&amp;title=Rviz%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%81%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82Qos&amp;source=Rviz%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%81%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82Qos%20-%20%E5%8F%A4%E6%9C%88%E5%B1%85&amp;desc=Rviz%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%81%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82Qos&amp;pics=https%3A%2F%2Fwww.guyuehome.com%2FApplication%2FHome%2FView%2Fdefault%2FPublic%2Fimages%2Flogo.png&amp;summary=%22Rviz%E6%98%BE%E7%A4%BA%E4%B8%8D%E5%87%BA%E6%95%B0%E6%8D%AE%E4%BA%86%EF%BC%81%E4%B8%80%E6%96%87%E6%90%9E%E6%87%82Qos%22" class="social-share-icon icon-qq" target="_blank"><i class="icon-share-qq"></i>QQ</a>
                                        <a href="https://www.guyuehome.com/37657#" class="social-share-icon icon-pic  j-mobile-share"><i class="icon-share-pic"></i>图片</a>
                                    </div>
                                </div>
                            </div>
                            <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                            <div style="display: none;">
                                <div class="social-share" data-sites="wechat,weibo,qq"></div>
                            </div>-->
                        </div>
                        <div class="prev-piece fz-16 black">上一篇：<a target="_blank" href="https://www.guyuehome.com/37656" class="black">[ROS2]下载Navigation2源码来学习</a></div>                        <div class="next-piece fz-16 black">下一篇：<a target="_blank" href="https://www.guyuehome.com/37860" class="black">ROS2 中代码的更新与维护方法</a></div>                    </div>
                </div>

                <div class="white-bg mb-20">
                        <div class="headline">
                            <h2 class="mlf-10">为你推荐</h2>
                        </div>
                        <div class="recom-list">
                            <ul class="row">
                                <li class="col-xs-6"><!--/Blog/detail/id/6090-->
                                            <a target="_blank" href="https://www.guyuehome.com/37560" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->[ROS2] 使用LifecycleNode管理节点起停等状态</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 1710</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li><li class="col-xs-6"><!--/Blog/detail/id/671-->
                                            <a target="_blank" href="https://www.guyuehome.com/13825" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->机器人操作系统二（ROS2）- 修行 Taoism</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 8043</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li><li class="col-xs-6"><!--/Blog/detail/id/6452-->
                                            <a target="_blank" href="https://www.guyuehome.com/37922" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->ROS2 发展历程和开发环境安装</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 1693</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li><li class="col-xs-6"><!--/Blog/detail/id/7067-->
                                            <a target="_blank" href="https://www.guyuehome.com/38537" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->ROS2 多线程</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 2252</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li><li class="col-xs-6"><!--/Blog/detail/id/6119-->
                                            <a target="_blank" href="https://www.guyuehome.com/37589" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->[ROS2] map_server加载地图文件的三种模式</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 1471</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li><li class="col-xs-6"><!--/Blog/detail/id/9449-->
                                            <a target="_blank" href="https://www.guyuehome.com/40916" class="item">
                                                <h4 class="clamp-one mb-10"><!--ROS2<br>-->ROS2基本命令与简单列子(python与C++)</h4>
                                                <div class="flexLeftCenter fz-13">
                                                    <span>阅读数 560</span>
                                                    <span class="ml-10">评论数 0</span>
                                                </div>
                                            </a>
                                        </li>                            </ul>
                        </div>
                    </div>
                <style>
                    .comment-list ul li:first-child .top-btn-action {display: none;}
                </style>
                <div class="white-bg mb-20">
                    <div class="comment-list" id="comment">
                                                    <div class="headline headline-not-login">
                            <h3>评论（0）</h3><p class="gray-5 pt-10">您还未登录，请<a href="javascript:;" class="blue js_login">登录</a>后发表或查看评论</p>
                            </div>
                    </div>
                </div>
            </div>
            <div class="main-right">
                <div class="js-sidebar" style="bottom: 0px;">
                    <div class="white-bg mb-20">
                        <div class="headline">
                            <h3>关于作者</h3>
                        </div>
                        <div class="ptd-20">
                            <div class="cell mb-30">
                                <div class="pic48" data-url="/ajax/author/625823771aadb">
                                    <a href="https://www.guyuehome.com/author/625823771aadb" target="_blank">
                                        <img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/6258246010648.jpeg" onerror="this.onerror=null;this.src=&#39;/Application/Home/View/default/Public/images/cms_images/img_default_user.png&#39;" title="" alt="">
                                                                            </a>
                                </div>
                                <div class="cell-bd mr-10 hidden">
                                    <a href="https://www.guyuehome.com/author/625823771aadb" target="_blank">
                                        <h4 class="clamp-one medium-font">首飞</h4>
                                    </a>
                                    <span class="fz-13">关注者 10</span>
                                </div>
                                <div class="cell-ft">
                                    <a href="javascript:;" data-id="16085" data-type="5" class="follow-btn follow-action-btn small js_login"><i class="icon-add"></i><span>已</span>关注</a>
                                </div>
                            </div>
                            <div class="flexCenter pb-12 botline">
                                <div class="text-center flex">
                                    <p class="gray-5 mb-5">博客</p>
                                    <h3 class="medium-font link-text"><a href="https://www.guyuehome.com/author/625823771aadb" target="_blank">47</a></h3>
                                </div>
                                <div class="text-center flex">
                                    <p class="gray-5 mb-5">泡泡</p>
                                    <h3 class="medium-font link-text"><a href="https://www.guyuehome.com/author/625823771aadb?type=2" target="_blank">0</a></h3>
                                </div>
                                <div class="text-center flex">
                                    <p class="gray-5 mb-5">积分</p>
                                    <h3 class="medium-font">1</h3>
                                </div>
                                <div class="text-center flex">
                                    <p class="gray-5 mb-5">勋章</p>
                                    <h3 class="medium-font">4</h3>
                                </div>
                            </div>
                        </div>
                        <ul class="recom-list">
                            <li>
                                    <!--/Blog/detail/id/7023-->
                                    <a target="_blank" href="https://www.guyuehome.com/38493" class="item">
                                    <!--<div class="item">-->
                                        <h4 class="clamp-two mb-10">使用GDB调试ROS2程序</h4>
                                        <div class="flexLeftCenter fz-13">
                                            <span>阅读数 1266</span>
                                            <span class="ml-10">评论数 0</span>
                                        </div>
                                    <!--</div>-->
                                    </a>
                                </li><li>
                                    <!--/Blog/detail/id/6452-->
                                    <a target="_blank" href="https://www.guyuehome.com/37922" class="item">
                                    <!--<div class="item">-->
                                        <h4 class="clamp-two mb-10">ROS2 发展历程和开发环境安装</h4>
                                        <div class="flexLeftCenter fz-13">
                                            <span>阅读数 1693</span>
                                            <span class="ml-10">评论数 0</span>
                                        </div>
                                    <!--</div>-->
                                    </a>
                                </li><li>
                                    <!--/Blog/detail/id/6492-->
                                    <a target="_blank" href="https://www.guyuehome.com/37962" class="item">
                                    <!--<div class="item">-->
                                        <h4 class="clamp-two mb-10">可以用哪些数据类型自定义ROS2消息</h4>
                                        <div class="flexLeftCenter fz-13">
                                            <span>阅读数 1628</span>
                                            <span class="ml-10">评论数 0</span>
                                        </div>
                                    <!--</div>-->
                                    </a>
                                </li>                        </ul>
                    </div>
                    <div class="white-bg mb-20 side-banner" style="height: 130px;">
        <a data-id="59" class="banner-item" href="https://class.guyuehome.com/detail/p_5e5f85df06a80_6Ga4qV9h/6" title="ROS2 1" target="_blank"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/6088dbf9ab441.jpg" title="ROS2 1" alt="ROS2 1"></a>            </div>                    <div class="white-bg mb-20">
                        <div class="headline">
                            <h3>相关推荐</h3>
                        </div>
                        <ul class="recom-list">
                            <li><!--/Blog/detail/id/210-->
                                        <a target="_blank" href="https://www.guyuehome.com/4953" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->ROS 2 | 节点 -nodes-</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 5326</span>
                                                <span class="ml-10">评论数 0</span>
                                            </div>
                                        </a>
                                    </li><li><!--/Blog/detail/id/6120-->
                                        <a target="_blank" href="https://www.guyuehome.com/37590" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->[ROS2] 动手实践Costmap新特性</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 1244</span>
                                                <span class="ml-10">评论数 0</span>
                                            </div>
                                        </a>
                                    </li><li><!--/Blog/detail/id/264-->
                                        <a target="_blank" href="https://www.guyuehome.com/6251" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->ROS2初学者教程（Dashing和Eloquent）Windows</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 5434</span>
                                                <span class="ml-10">评论数 0</span>
                                            </div>
                                        </a>
                                    </li><li><!--/Blog/detail/id/6491-->
                                        <a target="_blank" href="https://www.guyuehome.com/37961" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->[ROS2基础]话题与服务</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 1308</span>
                                                <span class="ml-10">评论数 0</span>
                                            </div>
                                        </a>
                                    </li><li><!--/Blog/detail/id/3976-->
                                        <a target="_blank" href="https://www.guyuehome.com/35446" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->基于ROS2的POP和OOP编程</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 3898</span>
                                                <span class="ml-10">评论数 0</span>
                                            </div>
                                        </a>
                                    </li><li><!--/Blog/detail/id/3951-->
                                        <a target="_blank" href="https://www.guyuehome.com/35421" class="item">
                                            <h4 class="clamp-two mb-10"><!--ROS2<br>-->Ubuntu20.04 ROS1和ROS2同时安装及使用</h4>
                                            <div class="flexLeftCenter fz-13">
                                                <span>阅读数 8697</span>
                                                <span class="ml-10">评论数 13</span>
                                            </div>
                                        </a>
                                    </li>                        </ul>
                    </div>
                    <div class="white-bg mb-20">
                        <div class="headline">
                            <h3>热门泡泡</h3>
                        </div>
                        <div class="hot-list">
                            <ul>
                                <li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/66110" class="item">
                                            <h4 class="clamp-two">
                                                <span class="integral-label"><i class="icon-integral-white"></i>30积分</span>                                                失眠，聊聊自己搞ROS的心得体会吧</h4>
                                        </a>
                                    </li><li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/66071" class="item">
                                            <h4 class="clamp-two">
                                                                                                ros学习路线</h4>
                                        </a>
                                    </li><li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/66250" class="item">
                                            <h4 class="clamp-two">
                                                <span class="integral-label"><i class="icon-integral-white"></i>30积分</span>                                                TF_REPEATED_DATA ignoring data错误</h4>
                                        </a>
                                    </li><li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/66034" class="item">
                                            <h4 class="clamp-two">
                                                                                                各位大佬，有什么ROS定位算法推荐吗</h4>
                                        </a>
                                    </li><li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/224" class="item">
                                            <h4 class="clamp-two">
                                                <span class="integral-label"><i class="icon-integral-white"></i>5积分</span>                                                ros中启动gazebo时报错</h4>
                                        </a>
                                    </li><li>
                                        <a target="_blank" href="https://www.guyuehome.com/Bubble/detail/id/66105" class="item">
                                            <h4 class="clamp-two">
                                                <span class="integral-label"><i class="icon-integral-white"></i>5积分</span>                                                想买能用ROS2的开发套件。或者开发板</h4>
                                        </a>
                                    </li>                            </ul>
                        </div>
                    </div>

                    <div class="white-bg mb-20">
                            <div class="headline">
                                <h3>TA的专栏</h3>
                            </div>
                              <!--<div class="no-column-data">
                                <img src="/Application/Home/View/default/Public/images/ic_zhuanlan_null.png" title="" alt="" />
                                <p>TA还没有专栏噢</p>
                              </div>-->
                            <ul class="column-list">
                                <li>
                                      <a target="_blank" href="https://www.guyuehome.com/blog/column/id/173" class="item">
                                        <div class="flexBetween">
                                          <h4 class="clamp-one flex">路径规划</h4>
                                          <span class="gray-6">3篇</span>
                                        </div>
                                      </a>
                                    </li><li>
                                      <a target="_blank" href="https://www.guyuehome.com/blog/column/id/127" class="item">
                                        <div class="flexBetween">
                                          <h4 class="clamp-one flex">实用技巧</h4>
                                          <span class="gray-6">13篇</span>
                                        </div>
                                      </a>
                                    </li><li>
                                      <a target="_blank" href="https://www.guyuehome.com/blog/column/id/126" class="item">
                                        <div class="flexBetween">
                                          <h4 class="clamp-one flex">ROS2</h4>
                                          <span class="gray-6">31篇</span>
                                        </div>
                                      </a>
                                    </li>                            </ul>
                        </div>
                    <div class="white-bg mb-20 column-nav">
                          <div class="headline">
                            <h3>专栏导航</h3>
                            <div class="swiper-pagination swiper-pagination-fraction"><span class="swiper-pagination-current">1</span> / <span class="swiper-pagination-total">4</span></div>
                            <div class="recom-column-button">
                              <div class="swiper-button-prev swiper-button-disabled"></div>
                              <div class="swiper-button-next"></div>
                            </div>
                          </div>
                          <div class="swiper-container swiper-container-horizontal">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide swiper-slide-active" style="width: 260px;">
                                        <a target="_blank" href="https://www.guyuehome.com/38895" class="item">
                                              <p class="clamp-two">你的机器人安全吗之SROS介绍</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38675" class="item">
                                              <p class="clamp-two">ROS2节点通信实现零拷贝</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38674" class="item">
                                              <p class="clamp-two">ROS2获取当前系统时间的方法</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38615" class="item">
                                              <p class="clamp-two">详细分析一个ROS2 CMakeLists.txt文件</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38546" class="item">
                                              <p class="clamp-two">ROS2多线程节点</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38495" class="item">
                                              <p class="clamp-two">ROS2中CMake编译选项的设置</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38493" class="item">
                                              <p class="clamp-two">使用GDB调试ROS2程序</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38443" class="item">
                                              <p class="clamp-two">是使用local_setup.bash 还是 setup.bash</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38442" class="item">
                                              <p class="clamp-two">ROS2中的行为树 BehaviorTree</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38379" class="item">
                                              <p class="clamp-two">[ROS2 基础] Navigation2 导航系统介绍</p>
                                            </a>                                    </div><div class="swiper-slide swiper-slide-next" style="width: 260px;">
                                        <a target="_blank" href="https://www.guyuehome.com/38304" class="item">
                                              <p class="clamp-two">[ROS2 基础] 仿真系统和搭建方法</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38303" class="item">
                                              <p class="clamp-two">下载TurtleBot4源码来学习</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38240" class="item">
                                              <p class="clamp-two">[ROS2基础] TF2使用细节</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38239" class="item">
                                              <p class="clamp-two">我的ROS2开发环境</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38053" class="item">
                                              <p class="clamp-two">ROS2新版本有哪些改进</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/38052" class="item">
                                              <p class="clamp-two">[ROS2基础]launch 文件和多节点进程</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37962" class="item">
                                              <p class="clamp-two">可以用哪些数据类型自定义ROS2消息</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37961" class="item">
                                              <p class="clamp-two">[ROS2基础]话题与服务</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37922" class="item">
                                              <p class="clamp-two">ROS2 发展历程和开发环境安装</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37861" class="item">
                                              <p class="clamp-two">[ROS2]数据回放伴侣Rviz+plotjuggler</p>
                                            </a>                                    </div><div class="swiper-slide" style="width: 260px;">
                                        <a target="_blank" href="https://www.guyuehome.com/37860" class="item">
                                              <p class="clamp-two">ROS2 中代码的更新与维护方法</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37657" class="item">
                                              <p class="clamp-two">Rviz显示不出数据了！一文搞懂Qos</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37656" class="item">
                                              <p class="clamp-two">[ROS2]下载Navigation2源码来学习</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37597" class="item">
                                              <p class="clamp-two">[ROS2] 你应该知道Costmap_2d 的这些细节</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37596" class="item">
                                              <p class="clamp-two">costmap是什么？</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37590" class="item">
                                              <p class="clamp-two">[ROS2] 动手实践Costmap新特性</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37589" class="item">
                                              <p class="clamp-two">[ROS2] map_server加载地图文件的三种模式</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37562" class="item">
                                              <p class="clamp-two">[ROS2] 查看Action 信息的常用命令</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37561" class="item">
                                              <p class="clamp-two">ROS2开发环境搭建</p>
                                            </a><a target="_blank" href="https://www.guyuehome.com/37560" class="item">
                                              <p class="clamp-two">[ROS2] 使用LifecycleNode管理节点起停等状态</p>
                                            </a>                                    </div><div class="swiper-slide" style="width: 260px;">
                                        <a target="_blank" href="https://www.guyuehome.com/37559" class="item">
                                              <p class="clamp-two">[ROS2] LifecycleNode 命令行工具</p>
                                            </a>                                    </div>                            </div>
                          </div>
                        </div>                </div>
            </div>
        </div>
    </div>
</div>

<input type="hidden" name="info_id" value="6187">
<input type="hidden" name="info_type" value="1">

<div class="layer-popup684 reward">
    <div class="text-center">
        <h1>谢谢关照了。</h1>
        <p class="fz-16 gray-5">您当前积分：<span class="blue total-integral">0</span></p>
    </div>
    <form method="post" class="layui-form">
        <div class="reward-list js_reward_list">
            <a href="javascript:;" class="item" data-value="2">2 积分</a>
            <a href="javascript:;" class="item" data-value="5">5 积分</a>
            <a href="javascript:;" class="item" data-value="8">8 积分</a>
            <a href="javascript:;" class="item" data-value="10">10 积分</a>
            <a href="javascript:;" class="item" data-value="15">15 积分</a>
            <a href="javascript:;" class="item" data-value=""><input id="integral" type="text" placeholder="自定义积分"></a>
        </div>
        <div class="form-btn-group flexCenter">
            <a href="javascript:;" class="btn w140 js_close">确定</a>
        </div>
    </form>

</div>


<div class="mobile-share-bg"><!--<div class="top_tips" style="display: block;">请长按图片，将内容推荐给好友</div>--></div>
<div class="mobile-share-wrap"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/6187"><div class="mobile-share-close">×</div></div>

<div class="pc-hide more-pc">想获取更多信息和操作，请移步电脑网页版</div>
<div class="sticky-bar">
    <ul>
        <li><a href="https://www.guyuehome.com/user/convert" title="积分兑换" class="icon-integral-convert"></a></li>
            <li><a href="https://www.guyuehome.com/Bubble/circleDetail/id/7" title="反馈建议" class="icon-feedback"></a></li>
            <li>
                <a href="javascript:;" title="微信公众号" class="icon-wechat"></a>
                <div class="dropdown-card"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/62d8ca0447daf.jpg" alt="微信公众号" title="微信公众号"></div>
            </li>
        <li class="js_topping top-show">
                <a href="javascript:;" title="返回顶部" class="icon-back-top"></a>
            </li>    </ul>
</div>


<footer class="footer">
    <div class="container flexBetween">
        <div class="flex">
            <div class="footer-link">
                <ul>
                    <li><a href="https://www.guyuehome.com/agreement" title="服务协议">服务协议</a></li><li><a href="https://www.guyuehome.com/privacy" title="隐私政策">隐私政策</a></li><li><a href="https://www.guyuehome.com/contact" title="联系我们">联系我们</a></li>
                </ul>
            </div>
            <div class="friendship-link">
                <span>友情链接：</span>
                <ul>
                    <li><a href="https://blog.csdn.net/hcx25909/" target="_blank" title="CSDN-古月居">CSDN-古月居</a></li><li><a href="http://wiki.ros.org/" target="_blank" title="ROS Wiki">ROS Wiki</a></li><li><a href="https://developer.horizon.ai/" target="_blank" title="地平线开发者社区">地平线开发者社区</a></li>                </ul>
            </div>
            <div class="copyright">
                <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011102004590" style="display:inline-block; vertical-align: middle;text-decoration:none;height:20px;line-height:20px;">
                    <img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/beian.png" style="float:left;">
                    <p style="float:left;height:20px;line-height:22px;margin: 0px 0px 0px 5px; ">鄂公网安备 42011102004590号</p>


                </a>
                <span class="ml-20" style=" display:inline-block; vertical-align: middle; text-decoration:none;height:20px;line-height:20px;"><p><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" textvalue="© 2021 古月居 鄂ICP备18024451号-2">© 2021 古月居 鄂ICP备18024451号-2</a></p></span>


            </div>
        </div>
        <a href="javascript:;" title="古月居微信公众号" class="wxcard">
            <div class="dropdown-card"><img src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/62d8ca0447daf.jpg" onerror="this.onerror=null;this.src=&#39;/Application/Home/View/default/Public/images/ic_low_wx.png&#39;" alt="" title=""></div>
        </a>
    </div>
</footer>
<div class="login-popup" style="display: none;">
        <div class="layui-tab">
            <ul class="layui-tab-title">
                <li class="layui-this">手机快捷登录</li>
                <li class="">帐号密码登录</li>
            </ul>
            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">
                    <form method="post" id="login-phone-form" class="layui-form" autocomplete="off">
                        <div class="layadmin-user-login-box layadmin-user-login-body" data-type="login">
                            <div class="layui-form-item mb-5">
                                <div class="area-code">
                                    <select name="prefix">
                                        <option value="86">中国大陆</option><option value="852">中国香港</option><option value="853">中国澳门</option><option value="886">中国台湾</option><option value="60">马来西亚</option><option value="62">印度尼西亚</option><option value="63">菲律宾</option><option value="65">新加坡</option><option value="66">泰国</option><option value="81">日本</option><option value="82">韩国</option><option value="7">塔吉克斯坦</option><option value="7">哈萨克斯坦</option><option value="84">越南</option><option value="90">土耳其</option><option value="91">印度</option><option value="92">巴基斯坦</option><option value="93">阿富汗</option><option value="94">斯里兰卡</option><option value="95">缅甸</option><option value="98">伊朗</option><option value="374">亚美尼亚</option><option value="670">东帝汶</option><option value="673">文莱</option><option value="850">朝鲜</option><option value="855">柬埔寨</option><option value="856">老挝</option><option value="880">孟加拉国</option><option value="960">马尔代夫</option><option value="961">黎巴嫩</option><option value="962">约旦</option><option value="963">叙利亚</option><option value="964">伊拉克</option><option value="965">科威特</option><option value="966">沙特阿拉伯</option><option value="967">也门</option><option value="968">阿曼</option><option value="970">巴勒斯坦</option><option value="971">阿联酋</option><option value="972">以色列</option><option value="973">巴林</option><option value="974">卡塔尔</option><option value="975">不丹</option><option value="976">蒙古</option><option value="977">尼泊尔</option><option value="993">土库曼斯坦</option><option value="994">阿塞拜疆</option><option value="995">乔治亚</option><option value="996">吉尔吉斯斯坦</option><option value="998">乌兹别克斯坦</option><option value="44">英国</option><option value="49">德国</option><option value="39">意大利</option><option value="33">法国</option><option value="7">俄罗斯</option><option value="30">希腊</option><option value="31">荷兰</option><option value="32">比利时</option><option value="34">西班牙</option><option value="36">匈牙利</option><option value="40">罗马尼亚</option><option value="41">瑞士</option><option value="43">奥地利</option><option value="45">丹麦</option><option value="46">瑞典</option><option value="47">挪威</option><option value="48">波兰</option><option value="223">圣马力诺</option><option value="336">匈牙利</option><option value="338">南斯拉夫</option><option value="350">直布罗陀</option><option value="351">葡萄牙</option><option value="352">卢森堡</option><option value="353">爱尔兰</option><option value="354">冰岛</option><option value="355">阿尔巴尼亚</option><option value="356">马耳他</option><option value="357">塞浦路斯</option><option value="358">芬兰</option><option value="359">保加利亚</option><option value="370">立陶宛</option><option value="371">拉脱维亚</option><option value="372">爱沙尼亚</option><option value="373">摩尔多瓦</option><option value="376">安道尔共和国</option><option value="380">乌克兰</option><option value="381">南斯拉夫</option><option value="385">克罗地亚</option><option value="386">斯洛文尼亚</option><option value="387">波黑</option><option value="389">马其顿</option><option value="396">梵蒂冈</option><option value="420">捷克</option><option value="421">斯洛伐克</option><option value="423">列支敦士登</option><option value="51">秘鲁</option><option value="52">墨西哥</option><option value="53">古巴</option><option value="54">阿根廷</option><option value="55">巴西</option><option value="56">智利</option><option value="57">哥伦比亚</option><option value="58">委内瑞拉</option><option value="500">福克兰群岛</option><option value="501">伯利兹</option><option value="502">危地马拉</option><option value="503">萨尔瓦多</option><option value="504">洪都拉斯</option><option value="505">尼加拉瓜</option><option value="506">哥斯达黎加</option><option value="507">巴拿马</option><option value="508">圣彼埃尔</option><option value="509">海地</option><option value="590">瓜德罗普</option><option value="591">玻利维亚</option><option value="592">圭亚那</option><option value="593">厄瓜多尔</option><option value="594">法属圭亚那</option><option value="595">巴拉圭</option><option value="596">马提尼克</option><option value="597">苏里南</option><option value="598">乌拉圭</option><option value="20">埃及</option><option value="27">南非</option><option value="212">摩洛哥</option><option value="213">阿尔及利亚</option><option value="216">突尼斯</option><option value="218">利比亚</option><option value="220">冈比亚</option><option value="221">塞内加尔</option><option value="222">毛里塔尼亚</option><option value="223">马里</option><option value="224">几内亚</option><option value="225">科特迪瓦</option><option value="226">布基拉法索</option><option value="227">尼日尔</option><option value="228">多哥</option><option value="229">贝宁</option><option value="230">毛里求斯</option><option value="231">利比里亚</option><option value="232">塞拉利昂</option><option value="233">加纳</option><option value="234">尼日利亚</option><option value="235">乍得</option><option value="236">中非</option><option value="237">喀麦隆</option><option value="238">佛得角</option><option value="239">圣多美</option><option value="239">普林西比</option><option value="240">赤道几内亚</option><option value="241">加蓬</option><option value="242">刚果</option><option value="243">扎伊尔</option><option value="244">安哥拉</option><option value="245">几内亚比绍</option><option value="247">阿森松</option><option value="248">塞舌尔</option><option value="249">苏丹</option><option value="250">卢旺达</option><option value="251">埃塞俄比亚</option><option value="252">索马里</option><option value="253">吉布提</option><option value="254">肯尼亚</option><option value="255">坦桑尼亚</option><option value="256">乌干达</option><option value="257">布隆迪</option><option value="258">莫桑比克</option><option value="260">赞比亚</option><option value="261">马达加斯加</option><option value="262">留尼旺岛</option><option value="263">津巴布韦</option><option value="264">纳米比亚</option><option value="265">马拉维</option><option value="266">莱索托</option><option value="267">博茨瓦纳</option><option value="268">斯威士兰</option><option value="269">科摩罗</option><option value="290">圣赫勒拿</option><option value="291">厄立特里亚</option><option value="297">阿鲁巴岛</option><option value="298">法罗群岛</option><option value="377">摩纳哥</option><option value="61">澳大利亚</option><option value="64">新西兰</option><option value="671">关岛</option><option value="674">瑙鲁</option><option value="676">汤加</option><option value="677">所罗门群岛</option><option value="678">瓦努阿图</option><option value="679">斐济</option><option value="682">科克群岛</option><option value="683">纽埃岛</option><option value="684">东萨摩亚</option><option value="685">西萨摩亚</option><option value="686">基里巴斯</option><option value="688">图瓦卢</option><option value="619162">科科斯岛</option><option value="6723">诺福克岛</option><option value="619164">圣诞岛</option><option value="1">美国</option><option value="1">加拿大</option><option value="1808">夏威夷</option><option value="1907">阿拉斯加</option><option value="299">格陵兰岛</option><option value="1808">中途岛</option><option value="1808">威克岛</option><option value="1809">维尔京群岛</option><option value="1809">波多黎各</option><option value="1809">巴哈马</option><option value="1809">安圭拉岛</option><option value="1809">圣卢西亚</option><option value="1809">巴巴多斯</option><option value="1876">牙买加</option><option value="64672">南极洲</option>                                    </select><div class="layui-unselect layui-form-select"><div class="layui-select-title"><input type="text" placeholder="请选择" value="中国大陆" readonly="" class="layui-input layui-unselect"><i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit"><dd lay-value="86" class="layui-this">中国大陆</dd><dd lay-value="852" class="">中国香港</dd><dd lay-value="853" class="">中国澳门</dd><dd lay-value="886" class="">中国台湾</dd><dd lay-value="60" class="">马来西亚</dd><dd lay-value="62" class="">印度尼西亚</dd><dd lay-value="63" class="">菲律宾</dd><dd lay-value="65" class="">新加坡</dd><dd lay-value="66" class="">泰国</dd><dd lay-value="81" class="">日本</dd><dd lay-value="82" class="">韩国</dd><dd lay-value="7" class="">塔吉克斯坦</dd><dd lay-value="7" class="">哈萨克斯坦</dd><dd lay-value="84" class="">越南</dd><dd lay-value="90" class="">土耳其</dd><dd lay-value="91" class="">印度</dd><dd lay-value="92" class="">巴基斯坦</dd><dd lay-value="93" class="">阿富汗</dd><dd lay-value="94" class="">斯里兰卡</dd><dd lay-value="95" class="">缅甸</dd><dd lay-value="98" class="">伊朗</dd><dd lay-value="374" class="">亚美尼亚</dd><dd lay-value="670" class="">东帝汶</dd><dd lay-value="673" class="">文莱</dd><dd lay-value="850" class="">朝鲜</dd><dd lay-value="855" class="">柬埔寨</dd><dd lay-value="856" class="">老挝</dd><dd lay-value="880" class="">孟加拉国</dd><dd lay-value="960" class="">马尔代夫</dd><dd lay-value="961" class="">黎巴嫩</dd><dd lay-value="962" class="">约旦</dd><dd lay-value="963" class="">叙利亚</dd><dd lay-value="964" class="">伊拉克</dd><dd lay-value="965" class="">科威特</dd><dd lay-value="966" class="">沙特阿拉伯</dd><dd lay-value="967" class="">也门</dd><dd lay-value="968" class="">阿曼</dd><dd lay-value="970" class="">巴勒斯坦</dd><dd lay-value="971" class="">阿联酋</dd><dd lay-value="972" class="">以色列</dd><dd lay-value="973" class="">巴林</dd><dd lay-value="974" class="">卡塔尔</dd><dd lay-value="975" class="">不丹</dd><dd lay-value="976" class="">蒙古</dd><dd lay-value="977" class="">尼泊尔</dd><dd lay-value="993" class="">土库曼斯坦</dd><dd lay-value="994" class="">阿塞拜疆</dd><dd lay-value="995" class="">乔治亚</dd><dd lay-value="996" class="">吉尔吉斯斯坦</dd><dd lay-value="998" class="">乌兹别克斯坦</dd><dd lay-value="44" class="">英国</dd><dd lay-value="49" class="">德国</dd><dd lay-value="39" class="">意大利</dd><dd lay-value="33" class="">法国</dd><dd lay-value="7" class="">俄罗斯</dd><dd lay-value="30" class="">希腊</dd><dd lay-value="31" class="">荷兰</dd><dd lay-value="32" class="">比利时</dd><dd lay-value="34" class="">西班牙</dd><dd lay-value="36" class="">匈牙利</dd><dd lay-value="40" class="">罗马尼亚</dd><dd lay-value="41" class="">瑞士</dd><dd lay-value="43" class="">奥地利</dd><dd lay-value="45" class="">丹麦</dd><dd lay-value="46" class="">瑞典</dd><dd lay-value="47" class="">挪威</dd><dd lay-value="48" class="">波兰</dd><dd lay-value="223" class="">圣马力诺</dd><dd lay-value="336" class="">匈牙利</dd><dd lay-value="338" class="">南斯拉夫</dd><dd lay-value="350" class="">直布罗陀</dd><dd lay-value="351" class="">葡萄牙</dd><dd lay-value="352" class="">卢森堡</dd><dd lay-value="353" class="">爱尔兰</dd><dd lay-value="354" class="">冰岛</dd><dd lay-value="355" class="">阿尔巴尼亚</dd><dd lay-value="356" class="">马耳他</dd><dd lay-value="357" class="">塞浦路斯</dd><dd lay-value="358" class="">芬兰</dd><dd lay-value="359" class="">保加利亚</dd><dd lay-value="370" class="">立陶宛</dd><dd lay-value="371" class="">拉脱维亚</dd><dd lay-value="372" class="">爱沙尼亚</dd><dd lay-value="373" class="">摩尔多瓦</dd><dd lay-value="376" class="">安道尔共和国</dd><dd lay-value="380" class="">乌克兰</dd><dd lay-value="381" class="">南斯拉夫</dd><dd lay-value="385" class="">克罗地亚</dd><dd lay-value="386" class="">斯洛文尼亚</dd><dd lay-value="387" class="">波黑</dd><dd lay-value="389" class="">马其顿</dd><dd lay-value="396" class="">梵蒂冈</dd><dd lay-value="420" class="">捷克</dd><dd lay-value="421" class="">斯洛伐克</dd><dd lay-value="423" class="">列支敦士登</dd><dd lay-value="51" class="">秘鲁</dd><dd lay-value="52" class="">墨西哥</dd><dd lay-value="53" class="">古巴</dd><dd lay-value="54" class="">阿根廷</dd><dd lay-value="55" class="">巴西</dd><dd lay-value="56" class="">智利</dd><dd lay-value="57" class="">哥伦比亚</dd><dd lay-value="58" class="">委内瑞拉</dd><dd lay-value="500" class="">福克兰群岛</dd><dd lay-value="501" class="">伯利兹</dd><dd lay-value="502" class="">危地马拉</dd><dd lay-value="503" class="">萨尔瓦多</dd><dd lay-value="504" class="">洪都拉斯</dd><dd lay-value="505" class="">尼加拉瓜</dd><dd lay-value="506" class="">哥斯达黎加</dd><dd lay-value="507" class="">巴拿马</dd><dd lay-value="508" class="">圣彼埃尔</dd><dd lay-value="509" class="">海地</dd><dd lay-value="590" class="">瓜德罗普</dd><dd lay-value="591" class="">玻利维亚</dd><dd lay-value="592" class="">圭亚那</dd><dd lay-value="593" class="">厄瓜多尔</dd><dd lay-value="594" class="">法属圭亚那</dd><dd lay-value="595" class="">巴拉圭</dd><dd lay-value="596" class="">马提尼克</dd><dd lay-value="597" class="">苏里南</dd><dd lay-value="598" class="">乌拉圭</dd><dd lay-value="20" class="">埃及</dd><dd lay-value="27" class="">南非</dd><dd lay-value="212" class="">摩洛哥</dd><dd lay-value="213" class="">阿尔及利亚</dd><dd lay-value="216" class="">突尼斯</dd><dd lay-value="218" class="">利比亚</dd><dd lay-value="220" class="">冈比亚</dd><dd lay-value="221" class="">塞内加尔</dd><dd lay-value="222" class="">毛里塔尼亚</dd><dd lay-value="223" class="">马里</dd><dd lay-value="224" class="">几内亚</dd><dd lay-value="225" class="">科特迪瓦</dd><dd lay-value="226" class="">布基拉法索</dd><dd lay-value="227" class="">尼日尔</dd><dd lay-value="228" class="">多哥</dd><dd lay-value="229" class="">贝宁</dd><dd lay-value="230" class="">毛里求斯</dd><dd lay-value="231" class="">利比里亚</dd><dd lay-value="232" class="">塞拉利昂</dd><dd lay-value="233" class="">加纳</dd><dd lay-value="234" class="">尼日利亚</dd><dd lay-value="235" class="">乍得</dd><dd lay-value="236" class="">中非</dd><dd lay-value="237" class="">喀麦隆</dd><dd lay-value="238" class="">佛得角</dd><dd lay-value="239" class="">圣多美</dd><dd lay-value="239" class="">普林西比</dd><dd lay-value="240" class="">赤道几内亚</dd><dd lay-value="241" class="">加蓬</dd><dd lay-value="242" class="">刚果</dd><dd lay-value="243" class="">扎伊尔</dd><dd lay-value="244" class="">安哥拉</dd><dd lay-value="245" class="">几内亚比绍</dd><dd lay-value="247" class="">阿森松</dd><dd lay-value="248" class="">塞舌尔</dd><dd lay-value="249" class="">苏丹</dd><dd lay-value="250" class="">卢旺达</dd><dd lay-value="251" class="">埃塞俄比亚</dd><dd lay-value="252" class="">索马里</dd><dd lay-value="253" class="">吉布提</dd><dd lay-value="254" class="">肯尼亚</dd><dd lay-value="255" class="">坦桑尼亚</dd><dd lay-value="256" class="">乌干达</dd><dd lay-value="257" class="">布隆迪</dd><dd lay-value="258" class="">莫桑比克</dd><dd lay-value="260" class="">赞比亚</dd><dd lay-value="261" class="">马达加斯加</dd><dd lay-value="262" class="">留尼旺岛</dd><dd lay-value="263" class="">津巴布韦</dd><dd lay-value="264" class="">纳米比亚</dd><dd lay-value="265" class="">马拉维</dd><dd lay-value="266" class="">莱索托</dd><dd lay-value="267" class="">博茨瓦纳</dd><dd lay-value="268" class="">斯威士兰</dd><dd lay-value="269" class="">科摩罗</dd><dd lay-value="290" class="">圣赫勒拿</dd><dd lay-value="291" class="">厄立特里亚</dd><dd lay-value="297" class="">阿鲁巴岛</dd><dd lay-value="298" class="">法罗群岛</dd><dd lay-value="377" class="">摩纳哥</dd><dd lay-value="61" class="">澳大利亚</dd><dd lay-value="64" class="">新西兰</dd><dd lay-value="671" class="">关岛</dd><dd lay-value="674" class="">瑙鲁</dd><dd lay-value="676" class="">汤加</dd><dd lay-value="677" class="">所罗门群岛</dd><dd lay-value="678" class="">瓦努阿图</dd><dd lay-value="679" class="">斐济</dd><dd lay-value="682" class="">科克群岛</dd><dd lay-value="683" class="">纽埃岛</dd><dd lay-value="684" class="">东萨摩亚</dd><dd lay-value="685" class="">西萨摩亚</dd><dd lay-value="686" class="">基里巴斯</dd><dd lay-value="688" class="">图瓦卢</dd><dd lay-value="619162" class="">科科斯岛</dd><dd lay-value="6723" class="">诺福克岛</dd><dd lay-value="619164" class="">圣诞岛</dd><dd lay-value="1" class="">美国</dd><dd lay-value="1" class="">加拿大</dd><dd lay-value="1808" class="">夏威夷</dd><dd lay-value="1907" class="">阿拉斯加</dd><dd lay-value="299" class="">格陵兰岛</dd><dd lay-value="1808" class="">中途岛</dd><dd lay-value="1808" class="">威克岛</dd><dd lay-value="1809" class="">维尔京群岛</dd><dd lay-value="1809" class="">波多黎各</dd><dd lay-value="1809" class="">巴哈马</dd><dd lay-value="1809" class="">安圭拉岛</dd><dd lay-value="1809" class="">圣卢西亚</dd><dd lay-value="1809" class="">巴巴多斯</dd><dd lay-value="1876" class="">牙买加</dd><dd lay-value="64672" class="">南极洲</dd></dl></div>
                                </div>
                                <div class="layui-input-block">
                                    <input type="text" name="phone" lay-verify="required" placeholder="输入手机号" class="layui-input">
                                </div>
                            </div>
                            <!--<div class="layui-form-item">
                                <div class="layui-input-block">
                                    <input type="text" name="captcha_code" lay-verify="required|verify_code" placeholder="输入图形验证码" class="layui-input">
                                </div>
                                <div class="layui-form-select">
                                    <p><a id="captcha_code_1" class="fz-12 blue" href="javascript:;" onclick="document.getElementById('captcha_img').src = 'http://www.guyuehome.com/index/code/type/login?' + Math.random();return false;"> 看不清？点击更换</a></p>
                                    <img  class="captcha-img" id="captcha_img" src="http://www.guyuehome.com/index/code/type/login" title="看不清?点击更换" alt="看不清?点击更换" onclick="document.getElementById('captcha_img').src = 'http://www.guyuehome.com/index/code/type/login?' + Math.random();return false;">
                                </div>
                            </div>-->
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <input type="password" name="sms_code" lay-verify="required" placeholder="输入6位短信验证码" class="layui-input">
                                </div>
                                <a class="fz-12 blue getcode" href="javascript:void(0)">发送验证码</a>
                            </div>

                        </div>
                        <div>
                            <style>
                                .v5-mask {z-index: 19999999 !important;}
                                .v5-pop { z-index: 20000000 !important; }
                            </style>
                            <div class="layui-form-item">
                                <div style="width: 100%;" v5-id="kDjEXcDZrZvcVhA6Lhpe2UPifN6unuVL" v5-rendered="true"><input type="hidden" name="vid"><div class="v5-validation-btn"><span class="v5-logo-icon">
    <span class="v5-logo-small"></span>
</span>
<span class="v5-text-normal">点击按钮进行验证</span></div><div class="v5-validation-btn-ing" style="display: none;"><span class="v5-logo-icon">
    <span class="v5-logo-small"></span>
    <span class="v5-ball-scale-multiple">
        <i></i><i></i><i></i>
</span>
</span>
<span class="v5-text-ing">智能检测中...</span></div><div class="v5-validation-btn-success" style="display: none;"><div class="v5-flash"></div>
<div class="v5-icon-success">
    <div class="v5-ball-clip-rotate"><div></div></div>
    <span class="v5-icon-ok"></span>
    <span class="v5-ok-move"></span>
</div>
<span class="v5-success-text">验证通过</span></div></div>
                            </div>
                            <div class="layui-btn-item">
                                <button class="layui-btn login-submit" lay-filter="login" lay-submit="" type="submit">登录/注册</button>
                            </div>
                            <input type="hidden" name="token_nonce" value="d2e68d2f91">
                            <div class="flexLeftCenter fz-11 lesp">
                                <span>未注册手机验证后自动登录，注册即代表同意</span><a href="https://www.guyuehome.com/agreement" target="_blank" class="blue">《用户协议》</a>
                            </div>
                        </div>
                    </form>
                    <div class="layui-trans" id="social_user">
                        <p>第三方账号登入</p>
                        <a href="https://www.guyuehome.com/user/openApiLogin/type/qq">
                            <i class="login-qq"></i>QQ
                        </a>
                        <a href="https://www.guyuehome.com/user/openApiLogin/type/sina">
                            <i class="login-weibo"></i>微博
                        </a>
                        <a href="https://www.guyuehome.com/user/openApiLogin/type/wechat">
                            <i class="login-wechat"></i>微信
                        </a>
                    </div>
                </div>
                <div class="layui-tab-item">
                    <form method="post" id="login-form" class="layui-form" autocomplete="off">
                        <div class="layadmin-user-login-box layadmin-user-login-body">
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <input id="phone" type="text" name="phone" lay-verify="required" placeholder="手机号或邮箱" class="layui-input">
                                </div>

                            </div>
                            <div class="layui-form-item">
                                <input id="password" type="password" name="password" lay-verify="required" placeholder="密码" class="layui-input">
                            </div>
                            <div class="flexBetween">
                                <div class="layui-input-block">
                                    <input id="remember" type="checkbox" name="remember" lay-skin="primary" title="记住密码"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><span>记住密码</span><i class="layui-icon layui-icon-ok"></i></div>
                                </div>
                                <a href="javascript:;" class="blue fz-12 js_forget">忘记密码？</a>
                                <!--               <a lay-href="/findpasword" href="javascript:void(0)" onclick="window.location.href = '/findpasword';" class="blue fz-12" >忘记密码？</a>
                                 -->            </div>
                            <input type="hidden" name="redirect_to" value="https://www.guyuehome.com//">
                            <input type="hidden" name="token_nonce" value="d2e68d2f91">
                        </div>
                        <div>
                            <div class="layui-btn-item">
                                <button class="layui-btn" lay-filter="login_2" lay-submit="" type="submit" value="登录" data-loading-text="正在提交...">登录</button>
                            </div>
                            <div class="flexLeftCenter fz-11 lesp">
                                <span>未注册手机验证后自动登录，注册即代表同意</span><a href="https://www.guyuehome.com/agreement" target="_blank" class="blue">《用户协议》</a>
                            </div>
                        </div>
                    </form>
                    <div class="layui-trans">
                        <p>第三方账号登入</p>
                        <a href="https://www.guyuehome.com/user/openApiLogin/type/qq">
                            <i class="login-qq"></i>QQ
                        </a>
                        <a href="https://www.guyuehome.com/User/openApiLogin/type/sina">
                            <i class="login-weibo"></i>微博
                        </a>
                        <a href="https://www.guyuehome.com/user/openApiLogin/type/wechat">
                            <i class="login-wechat"></i>微信
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="forget" style="display: none;">
            <h4 class="layer-title">忘记密码</h4>
            <div class="step">
                <div class="fz-13 active">1 身份验证</div>
                <i class="icon-arrow"></i>
                <div class="fz-13">2 设置新密码</div>
            </div>
            <form method="post" id="forget-form-one" class="layui-form" autocomplete="off">
                <div class="layadmin-user-login-box layadmin-user-login-body">

                </div>
                <div data-type="forget">
                    <div class="layui-form-item mb-5">
                        <div class="area-code">
                            <select name="prefix">
                                <option value="86">中国大陆</option><option value="852">中国香港</option><option value="853">中国澳门</option><option value="886">中国台湾</option><option value="60">马来西亚</option><option value="62">印度尼西亚</option><option value="63">菲律宾</option><option value="65">新加坡</option><option value="66">泰国</option><option value="81">日本</option><option value="82">韩国</option><option value="7">塔吉克斯坦</option><option value="7">哈萨克斯坦</option><option value="84">越南</option><option value="90">土耳其</option><option value="91">印度</option><option value="92">巴基斯坦</option><option value="93">阿富汗</option><option value="94">斯里兰卡</option><option value="95">缅甸</option><option value="98">伊朗</option><option value="374">亚美尼亚</option><option value="670">东帝汶</option><option value="673">文莱</option><option value="850">朝鲜</option><option value="855">柬埔寨</option><option value="856">老挝</option><option value="880">孟加拉国</option><option value="960">马尔代夫</option><option value="961">黎巴嫩</option><option value="962">约旦</option><option value="963">叙利亚</option><option value="964">伊拉克</option><option value="965">科威特</option><option value="966">沙特阿拉伯</option><option value="967">也门</option><option value="968">阿曼</option><option value="970">巴勒斯坦</option><option value="971">阿联酋</option><option value="972">以色列</option><option value="973">巴林</option><option value="974">卡塔尔</option><option value="975">不丹</option><option value="976">蒙古</option><option value="977">尼泊尔</option><option value="993">土库曼斯坦</option><option value="994">阿塞拜疆</option><option value="995">乔治亚</option><option value="996">吉尔吉斯斯坦</option><option value="998">乌兹别克斯坦</option><option value="44">英国</option><option value="49">德国</option><option value="39">意大利</option><option value="33">法国</option><option value="7">俄罗斯</option><option value="30">希腊</option><option value="31">荷兰</option><option value="32">比利时</option><option value="34">西班牙</option><option value="36">匈牙利</option><option value="40">罗马尼亚</option><option value="41">瑞士</option><option value="43">奥地利</option><option value="45">丹麦</option><option value="46">瑞典</option><option value="47">挪威</option><option value="48">波兰</option><option value="223">圣马力诺</option><option value="336">匈牙利</option><option value="338">南斯拉夫</option><option value="350">直布罗陀</option><option value="351">葡萄牙</option><option value="352">卢森堡</option><option value="353">爱尔兰</option><option value="354">冰岛</option><option value="355">阿尔巴尼亚</option><option value="356">马耳他</option><option value="357">塞浦路斯</option><option value="358">芬兰</option><option value="359">保加利亚</option><option value="370">立陶宛</option><option value="371">拉脱维亚</option><option value="372">爱沙尼亚</option><option value="373">摩尔多瓦</option><option value="376">安道尔共和国</option><option value="380">乌克兰</option><option value="381">南斯拉夫</option><option value="385">克罗地亚</option><option value="386">斯洛文尼亚</option><option value="387">波黑</option><option value="389">马其顿</option><option value="396">梵蒂冈</option><option value="420">捷克</option><option value="421">斯洛伐克</option><option value="423">列支敦士登</option><option value="51">秘鲁</option><option value="52">墨西哥</option><option value="53">古巴</option><option value="54">阿根廷</option><option value="55">巴西</option><option value="56">智利</option><option value="57">哥伦比亚</option><option value="58">委内瑞拉</option><option value="500">福克兰群岛</option><option value="501">伯利兹</option><option value="502">危地马拉</option><option value="503">萨尔瓦多</option><option value="504">洪都拉斯</option><option value="505">尼加拉瓜</option><option value="506">哥斯达黎加</option><option value="507">巴拿马</option><option value="508">圣彼埃尔</option><option value="509">海地</option><option value="590">瓜德罗普</option><option value="591">玻利维亚</option><option value="592">圭亚那</option><option value="593">厄瓜多尔</option><option value="594">法属圭亚那</option><option value="595">巴拉圭</option><option value="596">马提尼克</option><option value="597">苏里南</option><option value="598">乌拉圭</option><option value="20">埃及</option><option value="27">南非</option><option value="212">摩洛哥</option><option value="213">阿尔及利亚</option><option value="216">突尼斯</option><option value="218">利比亚</option><option value="220">冈比亚</option><option value="221">塞内加尔</option><option value="222">毛里塔尼亚</option><option value="223">马里</option><option value="224">几内亚</option><option value="225">科特迪瓦</option><option value="226">布基拉法索</option><option value="227">尼日尔</option><option value="228">多哥</option><option value="229">贝宁</option><option value="230">毛里求斯</option><option value="231">利比里亚</option><option value="232">塞拉利昂</option><option value="233">加纳</option><option value="234">尼日利亚</option><option value="235">乍得</option><option value="236">中非</option><option value="237">喀麦隆</option><option value="238">佛得角</option><option value="239">圣多美</option><option value="239">普林西比</option><option value="240">赤道几内亚</option><option value="241">加蓬</option><option value="242">刚果</option><option value="243">扎伊尔</option><option value="244">安哥拉</option><option value="245">几内亚比绍</option><option value="247">阿森松</option><option value="248">塞舌尔</option><option value="249">苏丹</option><option value="250">卢旺达</option><option value="251">埃塞俄比亚</option><option value="252">索马里</option><option value="253">吉布提</option><option value="254">肯尼亚</option><option value="255">坦桑尼亚</option><option value="256">乌干达</option><option value="257">布隆迪</option><option value="258">莫桑比克</option><option value="260">赞比亚</option><option value="261">马达加斯加</option><option value="262">留尼旺岛</option><option value="263">津巴布韦</option><option value="264">纳米比亚</option><option value="265">马拉维</option><option value="266">莱索托</option><option value="267">博茨瓦纳</option><option value="268">斯威士兰</option><option value="269">科摩罗</option><option value="290">圣赫勒拿</option><option value="291">厄立特里亚</option><option value="297">阿鲁巴岛</option><option value="298">法罗群岛</option><option value="377">摩纳哥</option><option value="61">澳大利亚</option><option value="64">新西兰</option><option value="671">关岛</option><option value="674">瑙鲁</option><option value="676">汤加</option><option value="677">所罗门群岛</option><option value="678">瓦努阿图</option><option value="679">斐济</option><option value="682">科克群岛</option><option value="683">纽埃岛</option><option value="684">东萨摩亚</option><option value="685">西萨摩亚</option><option value="686">基里巴斯</option><option value="688">图瓦卢</option><option value="619162">科科斯岛</option><option value="6723">诺福克岛</option><option value="619164">圣诞岛</option><option value="1">美国</option><option value="1">加拿大</option><option value="1808">夏威夷</option><option value="1907">阿拉斯加</option><option value="299">格陵兰岛</option><option value="1808">中途岛</option><option value="1808">威克岛</option><option value="1809">维尔京群岛</option><option value="1809">波多黎各</option><option value="1809">巴哈马</option><option value="1809">安圭拉岛</option><option value="1809">圣卢西亚</option><option value="1809">巴巴多斯</option><option value="1876">牙买加</option><option value="64672">南极洲</option>                            </select><div class="layui-unselect layui-form-select"><div class="layui-select-title"><input type="text" placeholder="请选择" value="中国大陆" readonly="" class="layui-input layui-unselect"><i class="layui-edge"></i></div><dl class="layui-anim layui-anim-upbit"><dd lay-value="86" class="layui-this">中国大陆</dd><dd lay-value="852" class="">中国香港</dd><dd lay-value="853" class="">中国澳门</dd><dd lay-value="886" class="">中国台湾</dd><dd lay-value="60" class="">马来西亚</dd><dd lay-value="62" class="">印度尼西亚</dd><dd lay-value="63" class="">菲律宾</dd><dd lay-value="65" class="">新加坡</dd><dd lay-value="66" class="">泰国</dd><dd lay-value="81" class="">日本</dd><dd lay-value="82" class="">韩国</dd><dd lay-value="7" class="">塔吉克斯坦</dd><dd lay-value="7" class="">哈萨克斯坦</dd><dd lay-value="84" class="">越南</dd><dd lay-value="90" class="">土耳其</dd><dd lay-value="91" class="">印度</dd><dd lay-value="92" class="">巴基斯坦</dd><dd lay-value="93" class="">阿富汗</dd><dd lay-value="94" class="">斯里兰卡</dd><dd lay-value="95" class="">缅甸</dd><dd lay-value="98" class="">伊朗</dd><dd lay-value="374" class="">亚美尼亚</dd><dd lay-value="670" class="">东帝汶</dd><dd lay-value="673" class="">文莱</dd><dd lay-value="850" class="">朝鲜</dd><dd lay-value="855" class="">柬埔寨</dd><dd lay-value="856" class="">老挝</dd><dd lay-value="880" class="">孟加拉国</dd><dd lay-value="960" class="">马尔代夫</dd><dd lay-value="961" class="">黎巴嫩</dd><dd lay-value="962" class="">约旦</dd><dd lay-value="963" class="">叙利亚</dd><dd lay-value="964" class="">伊拉克</dd><dd lay-value="965" class="">科威特</dd><dd lay-value="966" class="">沙特阿拉伯</dd><dd lay-value="967" class="">也门</dd><dd lay-value="968" class="">阿曼</dd><dd lay-value="970" class="">巴勒斯坦</dd><dd lay-value="971" class="">阿联酋</dd><dd lay-value="972" class="">以色列</dd><dd lay-value="973" class="">巴林</dd><dd lay-value="974" class="">卡塔尔</dd><dd lay-value="975" class="">不丹</dd><dd lay-value="976" class="">蒙古</dd><dd lay-value="977" class="">尼泊尔</dd><dd lay-value="993" class="">土库曼斯坦</dd><dd lay-value="994" class="">阿塞拜疆</dd><dd lay-value="995" class="">乔治亚</dd><dd lay-value="996" class="">吉尔吉斯斯坦</dd><dd lay-value="998" class="">乌兹别克斯坦</dd><dd lay-value="44" class="">英国</dd><dd lay-value="49" class="">德国</dd><dd lay-value="39" class="">意大利</dd><dd lay-value="33" class="">法国</dd><dd lay-value="7" class="">俄罗斯</dd><dd lay-value="30" class="">希腊</dd><dd lay-value="31" class="">荷兰</dd><dd lay-value="32" class="">比利时</dd><dd lay-value="34" class="">西班牙</dd><dd lay-value="36" class="">匈牙利</dd><dd lay-value="40" class="">罗马尼亚</dd><dd lay-value="41" class="">瑞士</dd><dd lay-value="43" class="">奥地利</dd><dd lay-value="45" class="">丹麦</dd><dd lay-value="46" class="">瑞典</dd><dd lay-value="47" class="">挪威</dd><dd lay-value="48" class="">波兰</dd><dd lay-value="223" class="">圣马力诺</dd><dd lay-value="336" class="">匈牙利</dd><dd lay-value="338" class="">南斯拉夫</dd><dd lay-value="350" class="">直布罗陀</dd><dd lay-value="351" class="">葡萄牙</dd><dd lay-value="352" class="">卢森堡</dd><dd lay-value="353" class="">爱尔兰</dd><dd lay-value="354" class="">冰岛</dd><dd lay-value="355" class="">阿尔巴尼亚</dd><dd lay-value="356" class="">马耳他</dd><dd lay-value="357" class="">塞浦路斯</dd><dd lay-value="358" class="">芬兰</dd><dd lay-value="359" class="">保加利亚</dd><dd lay-value="370" class="">立陶宛</dd><dd lay-value="371" class="">拉脱维亚</dd><dd lay-value="372" class="">爱沙尼亚</dd><dd lay-value="373" class="">摩尔多瓦</dd><dd lay-value="376" class="">安道尔共和国</dd><dd lay-value="380" class="">乌克兰</dd><dd lay-value="381" class="">南斯拉夫</dd><dd lay-value="385" class="">克罗地亚</dd><dd lay-value="386" class="">斯洛文尼亚</dd><dd lay-value="387" class="">波黑</dd><dd lay-value="389" class="">马其顿</dd><dd lay-value="396" class="">梵蒂冈</dd><dd lay-value="420" class="">捷克</dd><dd lay-value="421" class="">斯洛伐克</dd><dd lay-value="423" class="">列支敦士登</dd><dd lay-value="51" class="">秘鲁</dd><dd lay-value="52" class="">墨西哥</dd><dd lay-value="53" class="">古巴</dd><dd lay-value="54" class="">阿根廷</dd><dd lay-value="55" class="">巴西</dd><dd lay-value="56" class="">智利</dd><dd lay-value="57" class="">哥伦比亚</dd><dd lay-value="58" class="">委内瑞拉</dd><dd lay-value="500" class="">福克兰群岛</dd><dd lay-value="501" class="">伯利兹</dd><dd lay-value="502" class="">危地马拉</dd><dd lay-value="503" class="">萨尔瓦多</dd><dd lay-value="504" class="">洪都拉斯</dd><dd lay-value="505" class="">尼加拉瓜</dd><dd lay-value="506" class="">哥斯达黎加</dd><dd lay-value="507" class="">巴拿马</dd><dd lay-value="508" class="">圣彼埃尔</dd><dd lay-value="509" class="">海地</dd><dd lay-value="590" class="">瓜德罗普</dd><dd lay-value="591" class="">玻利维亚</dd><dd lay-value="592" class="">圭亚那</dd><dd lay-value="593" class="">厄瓜多尔</dd><dd lay-value="594" class="">法属圭亚那</dd><dd lay-value="595" class="">巴拉圭</dd><dd lay-value="596" class="">马提尼克</dd><dd lay-value="597" class="">苏里南</dd><dd lay-value="598" class="">乌拉圭</dd><dd lay-value="20" class="">埃及</dd><dd lay-value="27" class="">南非</dd><dd lay-value="212" class="">摩洛哥</dd><dd lay-value="213" class="">阿尔及利亚</dd><dd lay-value="216" class="">突尼斯</dd><dd lay-value="218" class="">利比亚</dd><dd lay-value="220" class="">冈比亚</dd><dd lay-value="221" class="">塞内加尔</dd><dd lay-value="222" class="">毛里塔尼亚</dd><dd lay-value="223" class="">马里</dd><dd lay-value="224" class="">几内亚</dd><dd lay-value="225" class="">科特迪瓦</dd><dd lay-value="226" class="">布基拉法索</dd><dd lay-value="227" class="">尼日尔</dd><dd lay-value="228" class="">多哥</dd><dd lay-value="229" class="">贝宁</dd><dd lay-value="230" class="">毛里求斯</dd><dd lay-value="231" class="">利比里亚</dd><dd lay-value="232" class="">塞拉利昂</dd><dd lay-value="233" class="">加纳</dd><dd lay-value="234" class="">尼日利亚</dd><dd lay-value="235" class="">乍得</dd><dd lay-value="236" class="">中非</dd><dd lay-value="237" class="">喀麦隆</dd><dd lay-value="238" class="">佛得角</dd><dd lay-value="239" class="">圣多美</dd><dd lay-value="239" class="">普林西比</dd><dd lay-value="240" class="">赤道几内亚</dd><dd lay-value="241" class="">加蓬</dd><dd lay-value="242" class="">刚果</dd><dd lay-value="243" class="">扎伊尔</dd><dd lay-value="244" class="">安哥拉</dd><dd lay-value="245" class="">几内亚比绍</dd><dd lay-value="247" class="">阿森松</dd><dd lay-value="248" class="">塞舌尔</dd><dd lay-value="249" class="">苏丹</dd><dd lay-value="250" class="">卢旺达</dd><dd lay-value="251" class="">埃塞俄比亚</dd><dd lay-value="252" class="">索马里</dd><dd lay-value="253" class="">吉布提</dd><dd lay-value="254" class="">肯尼亚</dd><dd lay-value="255" class="">坦桑尼亚</dd><dd lay-value="256" class="">乌干达</dd><dd lay-value="257" class="">布隆迪</dd><dd lay-value="258" class="">莫桑比克</dd><dd lay-value="260" class="">赞比亚</dd><dd lay-value="261" class="">马达加斯加</dd><dd lay-value="262" class="">留尼旺岛</dd><dd lay-value="263" class="">津巴布韦</dd><dd lay-value="264" class="">纳米比亚</dd><dd lay-value="265" class="">马拉维</dd><dd lay-value="266" class="">莱索托</dd><dd lay-value="267" class="">博茨瓦纳</dd><dd lay-value="268" class="">斯威士兰</dd><dd lay-value="269" class="">科摩罗</dd><dd lay-value="290" class="">圣赫勒拿</dd><dd lay-value="291" class="">厄立特里亚</dd><dd lay-value="297" class="">阿鲁巴岛</dd><dd lay-value="298" class="">法罗群岛</dd><dd lay-value="377" class="">摩纳哥</dd><dd lay-value="61" class="">澳大利亚</dd><dd lay-value="64" class="">新西兰</dd><dd lay-value="671" class="">关岛</dd><dd lay-value="674" class="">瑙鲁</dd><dd lay-value="676" class="">汤加</dd><dd lay-value="677" class="">所罗门群岛</dd><dd lay-value="678" class="">瓦努阿图</dd><dd lay-value="679" class="">斐济</dd><dd lay-value="682" class="">科克群岛</dd><dd lay-value="683" class="">纽埃岛</dd><dd lay-value="684" class="">东萨摩亚</dd><dd lay-value="685" class="">西萨摩亚</dd><dd lay-value="686" class="">基里巴斯</dd><dd lay-value="688" class="">图瓦卢</dd><dd lay-value="619162" class="">科科斯岛</dd><dd lay-value="6723" class="">诺福克岛</dd><dd lay-value="619164" class="">圣诞岛</dd><dd lay-value="1" class="">美国</dd><dd lay-value="1" class="">加拿大</dd><dd lay-value="1808" class="">夏威夷</dd><dd lay-value="1907" class="">阿拉斯加</dd><dd lay-value="299" class="">格陵兰岛</dd><dd lay-value="1808" class="">中途岛</dd><dd lay-value="1808" class="">威克岛</dd><dd lay-value="1809" class="">维尔京群岛</dd><dd lay-value="1809" class="">波多黎各</dd><dd lay-value="1809" class="">巴哈马</dd><dd lay-value="1809" class="">安圭拉岛</dd><dd lay-value="1809" class="">圣卢西亚</dd><dd lay-value="1809" class="">巴巴多斯</dd><dd lay-value="1876" class="">牙买加</dd><dd lay-value="64672" class="">南极洲</dd></dl></div>
                        </div>
                        <div class="layui-input-block">
                            <input type="text" name="phone" lay-verify="required" placeholder="输入手机号" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="text" name="captcha_code" lay-verify="required" placeholder="输入图形验证码" class="layui-input">
                        </div>
                        <div class="layui-form-select">
                            <p><a id="captcha_code_2" class="fz-12 blue" href="javascript:void(0)" onclick="document.getElementById(&#39;captcha_img_2&#39;).src = &#39;http://www.guyuehome.com/index/code/type/forget?&#39; + Math.random();return false;"> 看不清？点击更换</a></p>
                            <img class="captcha-img" id="captcha_img_2" src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/forget" title="看不清?点击更换" alt="看不清?点击更换" onclick="document.getElementById(&#39;captcha_img_2&#39;).src = &#39;http://www.guyuehome.com/index/code/type/forget?&#39; + Math.random();return false;">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="password" name="sms_code" id="LAY-user-login-password" lay-verify="required" placeholder="输入6位短信验证码" class="layui-input">
                        </div>
                        <a class="fz-12 blue getcode" href="javascript:void(0)">发送验证码</a>
                    </div>
                    <div class="layui-btn-item">
                        <button class="layui-btn next-step" lay-filter="">下一步</button>
                    </div>
                    <input type="hidden" name="token_nonce" value="d2e68d2f91">
                </div>
            </form>
            <form method="post" id="forget-form-two" class="layui-form" autocomplete="off">
                <div class="layadmin-user-login-box layadmin-user-login-body">
                </div>
                <div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="password" name="password" lay-verify="required" placeholder="请输入新密码" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <input type="password" name="repassword" lay-verify="required" placeholder="请再次输入新密码" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-btn-item">
                        <button class="layui-btn" lay-filter="reset_pwd" lay-submit="" type="submit">完成</button>
                    </div>
                    <input type="hidden" name="token" value="">
                </div>
            </form>
        </div>
    </div>
<div class="avatar-popup" style="">
    <div class="avatar-popup-title"><h3>修改头像</h3></div>
    <div class="avatar-popup-con" id="clipArea" style="user-select: none; overflow: hidden; position: relative;"><div class="photo-clip-layer" style="position: absolute; left: 50%; top: 50%; width: 270px; height: 270px; margin-left: -135px; margin-top: -135px;"><div class="photo-clip-move-layer" style="transform-origin: 0px 0px; transition-timing-function: cubic-bezier(0.1, 0.57, 0.1, 1); transition-duration: 0ms; transform: translate(0px, 0px) scale(1) translateZ(0px); width: 540px; height: 540px;"><div class="photo-clip-rotate-layer" style="transform: translateZ(0px) translate(270px, 270px) rotate(0deg);"></div></div></div><div class="photo-clip-mask" style="position: absolute; left: 0px; top: 0px; width: 100%; height: 100%; pointer-events: none;"><div class="photo-clip-mask-left" style="position: absolute; inset: 50% 50% 50% 0px; width: auto; background-color: rgba(0, 0, 0, 0.5); margin-right: 135px; margin-top: -135px; margin-bottom: -135px;"></div><div class="photo-clip-mask-right" style="position: absolute; inset: 50% 0px 50% 50%; background-color: rgba(0, 0, 0, 0.5); margin-left: 135px; margin-top: -135px; margin-bottom: -135px;"></div><div class="photo-clip-mask-top" style="position: absolute; inset: 0px 0px 50%; background-color: rgba(0, 0, 0, 0.5); margin-bottom: 135px;"></div><div class="photo-clip-mask-bottom" style="position: absolute; inset: 50% 0px 0px; background-color: rgba(0, 0, 0, 0.5); margin-top: 135px;"></div><div class="photo-clip-area" style="border: 2px dashed rgb(221, 221, 221); position: absolute; left: 50%; top: 50%; width: 270px; height: 270px; transform: translate(-50%, -50%);"></div></div></div>
    <div class="flexCenter">
        <button id="clipBtn" class="clip-btn">应用</button>
        <div class="reset-btn"><input type="file" id="file" accept="image/jpeg, image/x-png, image/png, image/gif"><span>选择图片</span></div>
    </div>
</div>

<div class="tag-popup">
    <h4 class="layer-title">添加你感兴趣的标签</h4>
    <div class="layer-con">
        <div class="tag-box">
            <a href="javascript:;" class="tag-check" data-id="18">ROS</a><a href="javascript:;" class="tag-check" data-id="15">智能车竞赛</a><a href="javascript:;" class="tag-check" data-id="22">建图导航</a><a href="javascript:;" class="tag-check" data-id="36">自动驾驶</a><a href="javascript:;" class="tag-check" data-id="34">运动控制</a><a href="javascript:;" class="tag-check" data-id="23">机器视觉</a><a href="javascript:;" class="tag-check" data-id="33">机器学习</a><a href="javascript:;" class="tag-check" data-id="21">建模仿真</a><a href="javascript:;" class="tag-check" data-id="20">机器人学</a><a href="javascript:;" class="tag-check" data-id="24">硬件电路</a><a href="javascript:;" class="tag-check" data-id="25">创客DIY教程</a><a href="javascript:;" class="tag-check" data-id="16">智能机器人创意大赛</a><a href="javascript:;" class="tag-check" data-id="13">ROS史话36篇</a><a href="javascript:;" class="tag-check" data-id="26">学习笔记</a><a href="javascript:;" class="tag-check" data-id="19">ROS2</a><a href="javascript:;" class="tag-check" data-id="8">技术前沿</a><a href="javascript:;" class="tag-check" data-id="9">行业资讯</a>        </div>
    </div>
</div>


<div class="comment-reply-popup">
    <div class="layer-title">置顶评论</div>
    <div class="release-bubble-con">
        <div class="fz-14 gray-5">确认将"<span class="name"></span>"的评论置顶嘛？</div>
        <div class="layui-form-btn flexCenter">
            <a href="javascript:;" class="cancel-btn js_comment_close ">取消</a>
            <a href="javascript:;" class="define-btn js_comment_close top-btn-action">确定</a>
        </div>
    </div>
</div>

<div class="delete-reply-popup">
    <div class="layer-title">删除评论</div>
    <div class="release-bubble-con">
        <div class="fz-14 gray-5">确认将"<span class="name"></span>"的评论删除嘛？</div>
        <div class="layui-form-btn flexCenter">
            <a href="javascript:;" class="cancel-btn js_comment_close">取消</a>
            <a href="javascript:;" class="define-btn js_comment_close del-btn-action">确定</a>
        </div>
    </div>
</div>

<div class="report-reply-popup">
    <div class="layer-title">举报反馈</div>
    <div class="release-bubble-con">
        <form method="post" action="https://www.guyuehome.com/37657" class="layui-form">
            <div class="form-item">
                <h4 class="mb-10">举报类型<span class="fz-14 gray-8">（必选）</span></h4>
                <div class="report-type">
                    <a href="javascript:;" data-id="1" class="tag-check">内容涉黄</a>
                    <a href="javascript:;" data-id="2" class="tag-check">政治相关</a>
                    <a href="javascript:;" data-id="3" class="tag-check">内容抄袭</a>
                    <a href="javascript:;" data-id="4" class="tag-check">涉嫌广告</a>
                    <a href="javascript:;" data-id="5" class="tag-check">内容侵权</a>
                    <a href="javascript:;" data-id="6" class="tag-check">侮辱谩骂</a>
                    <a href="javascript:;" data-id="7" class="tag-check">样式问题</a>
                    <a href="javascript:;" data-id="8" class="tag-check">其他</a>
                </div>

            </div>
            <div class="form-item">
                <h4 class="mb-10">举报详情<span class="fz-14 gray-8">（选填）</span></h4>
                <textarea name="report_detail" class="layui-textarea" id="releaseTextarea" placeholder="请详细描述举报原因，我们将第一时间核实处理" rows="3"></textarea>
            </div>
            <div class="layui-form-btn flexCenter">
                <a href="javascript:;" class="cancel-btn js_comment_close">取消</a>
                <a href="javascript:;" class="report-btn-action define-btn">确定</a>
            </div>
        </form>

    </div>
</div>



<script>

var _hmt = _hmt || [];

(function() {

  var hm = document.createElement("script");

  hm.src = "https://hm.baidu.com/hm.js?ca961b09f9e8028025bed12b4ad911da";

  var s = document.getElementsByTagName("script")[0];

  s.parentNode.insertBefore(hm, s);

})();

</script>
<script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279301722'%3E%3C/span%3E%3Cscript src='https://s4.cnzz.com/z_stat.php%3Fid%3D1279301722%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script><span id="cnzz_stat_icon_1279301722"></span><script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/z_stat.php" type="text/javascript"></script><input style="display: none;" type="text" value="" id="code">
<style>
    .copy-btn {
        display: none;
        position: absolute;
        right: 4px;
        top: 4px;
        font-size: 12px;
        color: #ffffff;
        background-color: #9999AA;
        padding: 2px 8px;
        margin: 8px;
        border-radius: 4px;
        cursor: pointer;
        box-shadow: 0 2px 4px rgb(0 0 0 / 5%), 0 2px 4px rgb(0 0 0 / 5%);
    }
    .access {
        cursor: pointer;

    }
</style>

<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/jquery-3.2.1.min.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/jquery.cookie.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/swiper.min.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/layui.all.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/select2.min.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/scrollBar.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/hammer.min.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/iscroll-zoom-min.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/lrz.all.bundle.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/PhotoClip.js.下载"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/v5.js.下载" type="text/javascript"></script>
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/common.js.下载"></script>
<!--<script src="/Application/Home/View/default/Public/js/clipboard.min.js"></script>-->
<script>
    $('code').each(function (index, item){
        $(item).after('<button class="copy-btn '+"js_login"+'">'+"登录后复制"+'</button>')
        var reg =  new RegExp('<[^>]+>','gi');  //过滤所有的html标签，不包括内容
        $(item).after('<div class="copy-code" style="display: none">'+$(item).html().replace(reg,'')+'</div>')
    })
    $('body').delegate('.copy-btn','click',function (){
        var _th = $(this)
        $('input[id="code"]').val(_th.prev('.copy-code').html()).show()
        var input = document.getElementById('code');
        input.select();
        document.execCommand("Copy");
        _th.html('已复制')
        $('input[id="code"]').hide()
        setTimeout(function (){
            _th.html('复制');
        },3000);
    })
    /* var clipboard = new ClipboardJS('.copy-btn');*/
    $('.article-body pre').addClass("line-numbers").css("white-space", "pre-wrap");
</script>
<link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/prism.css">
<script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/prism.js.下载" type="text/javascript"></script>
<script>

    /*
        Array.prototype.indexOf = function(val) {
            for (var i = 0; i < this.length; i++) {
                if (this[i] == val) return i;
            }
            return -1;
        };

        Array.prototype.remove = function(val) {
            var index = this.indexOf(val);
            if (index > -1) {
                this.splice(index, 1);
            }
        };
    */

    $('.comment-list').delegate('.access', 'click', function (){
        if($(this).data('href')){
            window.open($(this).data('href'), "_blank");
        }
        //$(this).parents('.user-message').siblings('a').click();
    })

    //本地搜索词
    var keywords = $.cookie('keywords'), _keyword = '';
    if(keywords){
        keywords = JSON.parse(keywords)
    }else{
        keywords = []
    }

    if(_keyword){
        //keywords.remove(_keyword)
        for (var i = 0; i < keywords.length; i++) {
            if (keywords[i] == _keyword) {
                keywords.splice(i, 1);
            }
        }
        keywords.unshift(_keyword)
    }
    $.cookie('keywords', JSON.stringify(keywords),{path:"/"})
    var _keywords_html = ''
    for (var i = 0; i < keywords.length && i < 10; i++){
        _keywords_html += '<li><a href="#">'+keywords[i]+'</a><i class="clear clear-item"></i></li>';
    }

    $('.search-list-one').find('ul').html(_keywords_html)
    $('.clear-all').click(function (){
        $(this).parent().siblings('ul').html('')
        $.cookie('keywords', '',{path:"/"})
    })
    $('body').delegate('.clear-item','click',function (e){
        e.preventDefault()
        //keywords.remove($(this).siblings('a').html())
        var _kkk = $(this).siblings('a').html()
        for (var i = 0; i < keywords.length; i++) {
            if (keywords[i] == _kkk) {
                keywords.splice(i, 1);
            }
        }
        $(this).parent().hide()
        $.cookie('keywords', JSON.stringify(keywords),{path:"/"})
    })
    $('body').delegate('.search-list ul a','click',function (){
        $('.header input[name="keyword"]').val($(this).html())
        $('#searchFrom').submit()
    })

    function check_keyword()
    {
        if(!$('.header #searchFrom input[name="keyword"]').val()){
            $('.header #searchFrom input[name="keyword"]').val($('.header #searchFrom input[name="keyword"]').prop('placeholder'))
        }
        $('.header #searchFrom input[name="keyword"]').blur();

        return true;
    }

    //搜索词轮播
    var hot_keywords = [{"name":"\u673a\u5668\u4eba\u5de5\u5177\u7bb1","hit":"201","show":1,"hot":1},{"name":"aruco","hit":"201","show":1,"hot":1},{"name":"pcl","hit":"635","show":2,"hot":0},{"name":"UR","hit":"627","show":2,"hot":0},{"name":"\u6811\u8393\u6d3e","hit":"621","show":2,"hot":0}], _start = 0;
    swiper_keyword()
    setInterval('swiper_keyword()',6000)
    function swiper_keyword(){
        if($('.header input[name="keyword"]').val() || hot_keywords[_start].hot=='0'){
            $('.search-icon').hide()
        }else{
            $('.search-icon').show()
        }
        $('.header input[name="keyword"]').prop('placeholder', hot_keywords[_start].name)
        _start++
        if(_start == hot_keywords.length){
            _start = 0
        }
    }

    //hover个人资料
    var _show = true

    $('body').delegate('.line-numbers', 'mouseenter', function(){
        $(this).find('.copy-btn').show();
    })
    $('body').delegate('.line-numbers', 'mouseleave', function(){
        $(this).find('.copy-btn').hide();
    })
    $('body').delegate('.avatar,.pic48', 'mouseenter', function(){
        var _th = $(this);
        _show = true
        $.ajax({
            url: _th.data('url'),
            type: "get",
            data: {},
            dataType: "json",
            success: function(data){
                console.log(data)
                if(data && _show){
                    _th.append(data)
                }
            }
        });
    })
    $('body').delegate('.avatar,.pic48', 'mouseleave', function(){
        _show = false
        $(this).find('.user-message').remove()
    })
    /*$('.avatar,.pic48').on({"mouseenter":function(){
            var _th = $(this);
            _show = true
            $.ajax({
                url: _th.data('url'),
                type: "get",
                data: {},
                dataType: "json",
                success: function(data){
                    console.log(data)
                    if(data && _show){
                        _th.append(data)
                    }
                }
            });
        },"mouseleave": function (){
            _show = false
            $(this).find('.user-message').remove()
        }});*/
    $(document).on('click',function(e){
        var target  = $(e.target);
        if(target.closest(".search").length == 0){
            $('.search-box').hide();
            $('.search-box').removeClass('active');
            $('.search-data').removeClass('show');
        }
    });

    var _show_medal;
    $('.close-medal').click(function (){
        layer.close(_show_medal)
    })
    //勋章
    var show_medal = function (){
        if($('.medal-popup').length>0){
            _show_medal = layer.open({
                type: 1,
                title: false,
                skin: 'layer-popup-medal',
                shadeClose: true,
                content: $('.medal-popup').eq(0),
                success: function () {
                    $(':focus').blur();
                },
                end: function() {
                    layer.closeAll();
                    $('.medal-popup').eq(0).remove();
                    $('.medal-popup').hide();
                    setTimeout('show_medal()',800)
                }
            });
        }
    }

    show_medal()

    $('#searchFrom input[name="keyword"]').change(function (){
        $('input[name="keyword"]').val($(this).val())
    })
    function dataList() {
        $('.search-box').show();
        $('.search-box').addClass('active');
        $('.search-data').addClass('show');
        var _val = $('#searchFrom input[name="keyword"]').val();
        $('#searchFrom input[name="keyword"]').val("").focus().val(_val);
    }

    var code_lang = [
        { text: 'HTML/XML', value: 'markup' },
        { text: 'JavaScript', value: 'javascript' },
        { text: 'CSS', value: 'css' },
        { text: 'PHP', value: 'php' },
        { text: 'Ruby', value: 'ruby' },
        { text: 'Python', value: 'python' },
        { text: 'Java', value: 'java' },
        { text: 'C', value: 'c' },
        { text: 'C#', value: 'csharp' },
        { text: 'C++', value: 'cpp' },
        { text: 'Bash', value: 'bash' },
        { text: 'YAML', value: 'yaml' },
        { text: 'CMake', value: 'cmake' },
    ];
    function IsMobile(){
        let info = navigator.userAgent;
        let agents = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPod", "iPad"];
        for(let i = 0; i < agents.length; i++){
            if(info.indexOf(agents[i]) >= 0) return true;
        }
        return false;
    }

    if(IsMobile()){
        $('.icon-school').parent().attr('href','https://appouGfvR0W9908.h5.xiaoeknow.com');
    }
    $(".scrollBox").scrollBar();
    var error_msg = function (msg){
        if(msg == '请登录后操作'){
            showLogin()
            //layer.msg(msg, {time: 2000})
        }else {
            layer.msg(msg, {icon: 5, anim: 6});
        }
    }
    var success_msg = function (msg, url = null){
        layer.msg(msg, {icon: 1, time: 2000}, function (){
            if(url){
                location.href = url
            }else if(url===false){

            }else{
                location.reload()
            }
        });
    }
    layui.use(['form', 'upload'], function(){
        var form = layui.form, upload = layui.upload

        if ($.cookie("f_rememberMe")) {
            $("#remember").prop("checked", true);
            $("#phone").val($.cookie("f_phone"));
            $("#password").val($.cookie("f_password"));
            form.render()
        }

        form.on('submit(login)', function(data){
            $.ajax({
                type: "POST",
                url: "/User/login",
                data: data.field,
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        success_msg(data.msg)
                    }else{
                        error_msg(data.msg)
                    }
                }
            });
            return false;
        });

        form.on('submit(reset_pwd)', function(data){
            if(data.field.repassword!=data.field.password){
                layer.msg('两次密码不一致')
                return false
            }
            $.ajax({
                type: "POST",
                url: "/User/updatePwd_2",
                data: data.field,
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        layer.msg(data.msg)
                        $('.forget').hide();
                        $('.layui-tab').show();
                    }else{
                        error_msg(data.msg)
                    }
                }
            });
            return false;
        });

        form.on('submit(login_2)', function(data){
            if ($("#remember").prop('checked')) {
                $.cookie("f_rememberMe", "true", {
                    expires: 7
                });
                $.cookie("f_phone", $("#phone").val(), {
                    expires: 7
                });
                $.cookie("f_password", $("#password").val(), {
                    expires: 7
                });
            } else {
                $.cookie("f_rememberMe", "false", {
                    expires: -1
                });
                $.cookie("f_phone", '', {
                    expires: -1
                });
                $.cookie("f_password", '', {
                    expires: -1
                });
            }

            $.ajax({
                type: "POST",
                url: "/User/login_2",
                data: data.field,
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        success_msg(data.msg)
                    }else{
                        error_msg(data.msg)
                    }
                }
            });
            return false;
        });

        if(''){
            layer.open({
                type: 1,
                title: false,
                skin: 'layer-popup',
                btn: ['跳过','确定'], //按钮
                shadeClose: true,
                content: $('.tag-popup'),
                success: function () {
                    $(':focus').blur();
                },
                btn2: function (){
                    $(':focus').blur();
                    var tags = []
                    $('.tag-check.checked').each(function (index, item){
                        tags.push($(item).data('id'))
                    })
                    if(tags.length == 0){
                        layer.msg('请选择标签')
                        return false
                    }else{
                        $.ajax({
                            type: "POST",
                            url: "/User/tag",
                            data: {tags: tags},
                            dataType: "json",
                            success: function(data){
                                if(data.status==1){
                                    success_msg(data.msg, false)
                                    layer.closeAll();
                                    $('.tag-popup').hide();
                                }else{
                                    error_msg(data.msg)
                                }
                            }
                        })
                        return false
                    }
                },
                end: function() {
                    layer.closeAll();
                    $('.tag-popup').hide();
                }
            });
        }

        /*upload.render({
            elem: '#avatar'
            ,url: '/user/avatar' //改成您自己的上传接口
            ,accept: 'images'
            ,field: 'image'
            ,done: function(res, index, upload){
                if(res.status==1){
                    location.reload()
                }else{
                    layer.msg(res.msg)
                }
            }
            ,error: function(){

            }
        });*/

        var pc = new PhotoClip('#clipArea', {
            size: [270, 270],
            outputSize: 640,
            //adaptive: ['60%', '80%'],
            file: '#file',
            view: '#avatar',
            ok: '#clipBtn',
            //img: 'img/mm.jpg',
            loadStart: function() {
                console.log('开始读取照片');
            },
            loadComplete: function() {
                console.log('照片读取完成');
            },
            done: function(dataURL) {

                $.ajax({
                    type: "POST",
                    url: "/user/avatar",
                    data: { image: dataURL},
                    dataType: "json",
                    success: function(res){
                        if(res.status==1){
                            location.reload()
                        }else{
                            layer.msg(res.msg)
                        }
                    }
                });
                return false;
                console.log(dataURL);
                $('#avatar').html('<img src="' + dataURL + '" title="" alt="" />');
                layer.closeAll();
                $('.avatar-popup').hide();
            },
            fail: function(msg) {
                alert(msg);
            }
        });

        // 加载的图片必须要与本程序同源，否则无法截图
        // pc.load('img/mm.jpg');
        $(".js_avatar").click(function(){
            layer.open({
                type: 1,
                title: false,
                skin: 'layer-popup544',
                shadeClose: true,
                content:  $('.avatar-popup'),
                success: function () {
                    $(':focus').blur();
                },
                end: function() {
                    layer.closeAll();
                    $('.avatar-popup').hide();
                }
            });
            return false;
        });
    })
    $('.js_login').on('click', function(){
        var _this = $(this);
        showLogin()
        return false;
    });

    var _date = new Date();
    _data = _date.toLocaleDateString()
    if(!"" && _data != localStorage.getItem('current_date')){
        setTimeout('showLogin(true)', 10000);
    }

    function showLogin(auto=false){
        if(auto && _data == localStorage.getItem('current_date')){
            return false
        }
        localStorage.setItem('current_date', _data)
        $('.forget').hide();
        $('.layui-tab').show();
        $('#captcha_code_1').click()
        layer.open({
            type: 1,
            title: false,
            skin: 'layer-popup380',
            shadeClose: true,
            content:  $('.login-popup'),
            success: function () {
                $(':focus').blur();
            },
            end: function() {
                layer.closeAll();
                $('.login-popup').hide();
            }
        });
    }

    $('.js_forget').on('click', function(){
        var _this = $(this);
        $('#forget-form-one').show()
        $('#forget-form-two').hide()
        $('#captcha_code_2').click()
        $('.step .fz-13:eq(0)').addClass('active')
        $('.step .fz-13:eq(1)').removeClass('active')

        $('.forget').show();
        $('.layui-tab').hide();
        return false;
    });

    $('.next-step').click(function (){
        var _this = $(this).parent().parent()
        var _prefix = _this.find('select').val()
        var _phone = _this.find('input[name="phone"]').val()
        if(!_phone){
            _this.find('input[name="phone"]').focus()
            error_msg('必填项不能为空')
            can_send = true
            return false
        }
        var _captcha_code = _this.find('input[name="captcha_code"]').val()
        if(!_captcha_code){
            _this.find('input[name="captcha_code"]').focus()
            error_msg('必填项不能为空')
            can_send = true
            return false
        }

        var _sms_code = _this.find('input[name="sms_code"]').val()
        if(!_sms_code){
            _this.find('input[name="sms_code"]').focus()
            error_msg('必填项不能为空')
            can_send = true
            return false
        }

        $.ajax({
            type: "POST",
            url: "/User/login",
            data: {phone: _phone, prefix: _prefix, captcha_code: _captcha_code,sms_code:_sms_code, type: 'forget'},
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    $('input[name="token"]').val(data.token)
                    $('#forget-form-one').hide()
                    $('#forget-form-two').show()
                    $('.step .fz-13:eq(0)').removeClass('active')
                    $('.step .fz-13:eq(1)').addClass('active')
                }else{
                    layer.msg(data.msg, {icon: 5, anim: 6});
                }
            }
        });
        return false
    })

    var can_send = true, _count
    function count(){
        if(_count){
            $('.getcode').html(_count+'秒后重新发送')
            _count--
            setTimeout("count()", 1000)
        }else{
            can_send = true
            $('.getcode').addClass('blue')
            $('.getcode').html('发送验证码')
        }
    }

    $('.getcode').click(function (){
        if(can_send){
            can_send = false
            var _this = $(this).parent().parent()
            var _phone = _this.find('input[name="phone"]').val()
            var _prefix = _this.find('.area-code select').val()
            if(!_phone){
                _this.find('input[name="phone"]').focus()
                error_msg('必填项不能为空')
                can_send = true
                return false
            }

            if(_this.find('input[name="captcha_code"]').length){
                var _captcha_code = _this.find('input[name="captcha_code"]').val()
                if(!_captcha_code){
                    _this.find('input[name="captcha_code"]').focus()
                    error_msg('必填项不能为空')
                    can_send = true
                    return false
                }
            }

            $.ajax({
                type: "POST",
                url: "/User/sendCode",
                data: {phone: _phone, prefix: _prefix, captcha_code: _captcha_code, type:_this.data('type')},
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        _count = 59
                        $('.getcode').html('60秒后重新发送')
                        $('.getcode').removeClass('blue')
                        setTimeout("count()", 1000)
                    }else{
                        layer.msg(data.msg, {icon: 5, anim: 6});
                        can_send = true
                    }
                }
            });

        }
    })

    let ____type;
    $('.top-btn-action').click(function (){
        $.ajax({
            type: "POST",
            url: "/blog/topComment",
            data: {
                id: __id,
                type: ____type
            },
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    success_msg(data.msg)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })

    $('.del-btn-action').click(function (){
        var _this = $(this)
        $.ajax({
            type: "POST",
            url: "/blog/delComment",
            data: {
                id: __id//_this.data('id')
            },
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    success_msg(data.msg)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })

    $('.report-btn-action').click(function (e){
        e.preventDefault()
        var __type = $('.report-type .checked').data('id')
        if(!__type){
            layer.msg('请选择举报类型')
            return false
        }
        var __content = $('[name="report_detail"]').val()
        $.ajax({
            type: "POST",
            url: "/blog/reportComment",
            data: {
                id: __id,
                type: __type,
                content: __content
            },
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    success_msg(data.msg)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })

    $('.js_comment_close').on('click', function(){
        layer.closeAll();
        $('.layer-popup480').hide();
        $('.layer-popup684').hide();
        return false;
    });
    $('.js_comment_top').on('click', function(){
        var _this = $(this);
        layer.open({
            type: 1,
            title: false,
            skin: 'layer-popup480',
            shadeClose: true,
            content: $('.comment-reply-popup'),
            success: function () {
                $(':focus').blur();
            },
            end: function() {
                layer.closeAll();
                $('.comment-reply-popup').hide();
            }
        });
        return false;
    });
    $('.js_comment_delete').on('click', function(){
        var _this = $(this);
        layer.open({
            type: 1,
            title: false,
            skin: 'layer-popup480',
            shadeClose: true,
            content: $('.delete-reply-popup'),
            success: function () {
                $(':focus').blur();
            },
            end: function() {
                layer.closeAll();
                $('.delete-reply-popup').hide();
            }
        });
        return false;
    });
    $('.js_comment_report').on('click', function(){
        var _this = $(this);
        layer.open({
            type: 1,
            title: false,
            skin: 'layer-popup652',
            shadeClose: true,
            content: $('.report-reply-popup'),
            success: function () {
                $(':focus').blur();
            },
            end: function() {
                layer.closeAll();
                $('.report-reply-popup').hide();
            }
        });
        return false;
    });
    $('.report-type .tag-check').on('click', function(){
        $(this).addClass('checked').siblings().removeClass('checked');
        return false;
    });
    var __id;
    $('.js_reply_more').on('click', function(){
        __id = $(this).data('id')
        $('.name').html($(this).data('name'))
        $(this).find('.reply-more-down').show();
        return false;
    });
    $(document).on("click",function(e){
        var target  = $(e.target);
        if(target.closest(".reply-more-down").length == 0){
            $('.reply-more-down').hide();
        }
    });

    //关注
    $('body').delegate('.follow-action-btn','click',function (e){
        e.preventDefault();
        var _this = $(this)
        if($(this).hasClass('js_login')){
            return false
        }
        $.ajax({
            type: "POST",
            url: "/Index/ajaxFollow",
            data: { id:_this.data('id'), type:_this.data('type')},
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    if(data.state==1){
                        data.msg = (_this.data('type')==3 || _this.data('type')==5 || _this.data('type')==6 || _this.data('type')==7)?'关注成功':'收藏成功'
                        if(_this.data('type')==7){
                            $('#column_follow').html(parseInt($('#column_follow').html())+1)
                        }else if(_this.data('type')==6){
                            $('#cat_follow').html(parseInt($('#cat_follow').html())+1)
                        }else if(_this.data('type')==5){
                            $('#author_follow').html(parseInt($('#author_follow').html())+1)
                        }
                        _this.find('.collect-num').html(parseInt(_this.find('.collect-num').html())+1)
                        _this.addClass('active')
                    }else{
                        data.msg = (_this.data('type')==3 || _this.data('type')==5 || _this.data('type')==6 || _this.data('type')==7)?'已取消关注':'已取消收藏'
                        if(_this.data('type')==7){
                            $('#column_follow').html(parseInt($('#column_follow').html())-1)
                        }else if(_this.data('type')==6){
                            $('#cat_follow').html(parseInt($('#cat_follow').html())-1)
                        }else if(_this.data('type')==5){
                            $('#author_follow').html(parseInt($('#author_follow').html())-1)
                        }
                        _this.find('.collect-num').html(parseInt(_this.find('.collect-num').html())-1)
                        _this.removeClass('active')
                    }
                    layer.msg(data.msg)
                    //success_msg(data.msg, false)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })
    //点赞
    $('.like-action-btn').click(function (){
        var _this = $(this)
        if($(this).hasClass('js_login')){
            return false
        }
        $.ajax({
            type: "POST",
            url: "/Index/ajaxLike",
            data: {id:_this.data('id'), type:_this.data('type')},
            dataType: "json",
            success: function(data){
                if(data.status==1){
                    if(data.state==1){
                        data.msg = '点赞成功'
                        _this.find('.like-num').html(parseInt(_this.find('.like-num').html())+1)
                        _this.addClass('active')
                    }else{
                        data.msg = '已取消点赞'
                        _this.find('.like-num').html(parseInt(_this.find('.like-num').html())-1)
                        _this.removeClass('active')
                    }
                    layer.msg(data.msg)
                    //success_msg(data.msg, false)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })

    $('.join-action-btn').click(function (){
        var _this = $(this)
        if($(this).hasClass('js_login')){
            return false
        }
        $.ajax({
            url: "/Bubble/joinCircle",
            type: 'post',
            data: {id:_this.data('id')},
            dataType: "json",
            success: function (data)
            {
                if(data.status == 1){
                    if(data.in == 1){
                        if(_this.hasClass('medium')){
                            _this.html('已加入')
                        }
                        _this.addClass('active')
                    }else{
                        if(_this.hasClass('medium')){
                            _this.html('加入')
                        }
                        _this.removeClass('active')
                    }
                    layer.msg(data.msg)
                }else{
                    error_msg(data.msg)
                }
            }
        });
    })

    $(function (){
        new Swiper('.side-banner .swiper-container', {
            slidesPerView: 'auto',
            centeredSlides: true,
            loop: true,
            autoplay: 3000,
            pagination: {
                el: '.side-banner .swiper-pagination',
                clickable: true,
            },
        });

        $('.read-all').click(function (){
            var _this = $(this)
            var _type = _this.data('type')
            $.ajax({
                type: "POST",
                url: "/index/ajaxRead",
                data: {
                    type: _type
                },
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        $('#no_read_count').html('0')
                        $('.read-single').find('.icon-round').remove()
                        $('.sub-nav li').eq(_type).find('.num').remove()
                        _this.remove()
                    }else{
                        error_msg(data.msg)
                    }
                }
            });
        })

        $('.read-single').click(function (){
            var _this = $(this)
            var _type = _this.parent().data('type')
            $.ajax({
                type: "POST",
                url: "/index/ajaxRead",
                data: {
                    type: _type,
                    id: _this.data('id')
                },
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        if($('#no_read_count').html()>0){
                            var _new_count = $('#no_read_count').html()-1
                            $('#no_read_count').html(_new_count)
                            if(_new_count>0){
                                $('.sub-nav li').eq(_type).find('.num').html(_new_count)
                            }else{
                                $('.sub-nav li').eq(_type).find('.num').remove()
                            }
                        }
                        _this.find('.icon-round').remove()
                    }
                }
            });
        })
        $('.banner-item').click(function (){
            var _this = $(this)
            $.ajax({
                type: "POST",
                url: "/index/hitBanner",
                data: {
                    id: _this.data('id')
                },
                dataType: "json",
                success: function(data){

                }
            });
        })
    })
</script>








    
    <link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/jquery.fancybox.css" crossorigin="anonymous">
    <script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/jquery.fancybox.js.下载" crossorigin="anonymous"></script>
    <!--<link rel="stylesheet" href="/Application/Home/View/default/Public/highlight/styles/a11y-light.css">
    <script type="text/javascript" src="/Application/Home/View/default/Public/highlight/highlight.pack.js"></script>


    &lt;!&ndash;<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/styles/default.min.css">&ndash;&gt;
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/highlight.min.js"></script>
    <script type="text/javascript" src="/Application/Home/View/default/Public/highlight/highlightjs-line-numbers.js"></script>
    <style>
        .hljs {
            border: 0;
            font-size: 12px;
            display: inline-block;
            vertical-align: top;
            padding: 1px;
            margin: 0;
            width: 100%;
            font-weight: 200;
            color: #333;
            white-space: pre-wrap
        }
        .hljs ol {
            /*   list-style: decimal;*/
            margin: 0px 0px 0 20px !important;
            padding: 0px;
        }
        .hljs ol li {
            /* list-style: decimal-leading-zero;*/
            border-left: 1px solid #e6e6e6 !important;
            padding: 0 0 0 5px!important;
            margin: 0 !important;
            white-space: pre;
            color:#333
        }
        .hljs-ln-numbers {
            text-align: center;
            color: #ccc;
            border-right: 1px solid #999 !important;
            vertical-align: top;
            padding-right: 5px !important;
            margin-right: 10px;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        .hljs-ln-code {
            padding-left: 10px !important;
        }
    </style>-->
    <link rel="stylesheet" href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer="" src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/katex.min.js.下载" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer="" src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/auto-render.min.js.下载" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    <script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/social-share.min.js.下载"></script>

    <script src="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/tinymce.min.js.下载" type="text/javascript"></script>
    <script>
        ____type = 1;
        $('.article-body :not(.mce-toc) a').attr('target', '_blank');
        $(function(){
            $('.j-mobile-share').on('click', function(){
                $('.mobile-share-bg,.mobile-share-wrap').show();
                return false;
            });
            $('.mobile-share-close').on('click', function(){
                $(".mobile-share-bg,.mobile-share-wrap").hide();
            });

            /*$('.article-body').find('img').each(function (index,item){
                if(!$(item).hasClass('light-box')){
                    $(item).wrap('<a href="'+$(item).attr('src')+'" class="fluid-box"></a>')
                }
            })
            $('.comment-list .introduction').find('img').each(function (index,item){
                if(!$(item).hasClass('light-box') && $(item).data('emoticon')!=true){
                    $(item).wrap('<a href="'+$(item).attr('src')+'" class="fluid-box"></a>')
                }
            })
            $('.fluid-box').fluidbox({stackIndexDelta:990})*/
            $('.article-body').find('img').each(function (index,item){
                if(!$(item).hasClass('fancy-box') && !$(item).parent().attr('href')){
                    $(item).wrap('<a href="'+$(item).attr('src')+'" class="fancy-box" data-fancybox="gallery"></a>')
                }
            })
            $('.comment-list .introduction').find('img').each(function (index,item){
                if(!$(item).hasClass('fancy-box') && $(item).data('emoticon')!=true){
                    $(item).wrap('<a href="'+$(item).attr('src')+'" class="fancy-box" data-fancybox="gallery"></a>')
                }
            })
           

            $('.article-body').find(".editormd-tex").each(function(){
                var tex  = $(this);
                //katex.render(tex.html().replace(/<br />/g,'').replace(/&lt;/g, "<").replace(/&gt;/g, ">"), tex[0]);
                katex.render(tex.text(), tex[0]);
                //tex.find(".katex").css("font-size", "1.6em");
            });
            /*hljs.highlightAll();
            $('pre').each(function(i, block) {
                /!*$(this).html("<ol><li>" + $(this).html().replace(/n/g,"n</li><li>") +"n</li></ol>");
                $(this).find('ol li:last').remove()*!/
                hljs.highlightBlock(block);
                hljs.lineNumbersBlock(block,{
                    singleLine: true      //开启单行行号显示
                });
            });*/
        })

        $('.js_reward_list a').click(function () {
            $(this).addClass('checked').siblings().removeClass('checked');
            return false;
        });
        $('.layui-textarea').bind('input propertychange', function(){
            var length = $(this).val().length;
            if(length > 0){
               $(this).parent().parent().next().removeClass('release-textarea-btn');
            }else{
            $(this).parent().parent().next().addClass('release-textarea-btn');
            }
        });
        $('#integral').on('input',function (){
            var _val = parseInt($(this).val())
            _val = _val?_val:''
            $(this).val(_val)
            $(this).parent().data('value', _val)
        })
        $('#integral').on('focus',function (){
            $(this).attr('placeholder', '')
        })
        $('#integral').on('blur',function (){
            $(this).attr('placeholder', '自定义积分')
        })

        $('.js_reward').on('click', function(){
            var _this = $(this);
            if(_this.hasClass('js_login')){
                return false
            }
            layer.open({
                type: 1,
                title: false,
                skin: 'layer-popup684',
                shadeClose: true,
                content: $('.reward'),
                success: function () {
                  $(':focus').blur();
                },
                end: function() {
                    layer.closeAll();
                    $('.reward').hide();
                }
            });
            return false;
        });
        $('.js_close').on('click', function(){
            if($('.js_reward_list a.checked').length<1){
                layer.msg('请选择积分')
                return false;
            }
            var _integral = parseInt($('.js_reward_list a.checked').data('value'))
            _integral = _integral?_integral:0
            if(_integral<1){
                layer.msg('积分必须大于0')
                return false;
            }else{
                $.ajax({
                    type: "POST",
                    url: "/blog/reward",
                    data: {
                        id: "6187",
                        integral: _integral
                    },
                    dataType: "json",
                    success: function(data){
                        if(data.status==1){
                            $('.total-integral').html(data.integral)
                            $('.reward-num').html(parseInt($('.reward-num').html())+1)
                            layer.closeAll();
                            layer.msg(data.msg)
                            $('.layer-popup684').hide();
                        }else{
                            error_msg(data.msg)
                        }
                    }
                });
            }
            return false;
        });


        $('.js_comment').on('click', function(e){
            var target = e.target;
            var id = $(target).data("to");
            $('html,body').animate({scrollTop:$('#'+id).offset().top}, 800);
        });
        $('.js_comment_reply').on('click', function(e){
            if($('.release-dropdown').find('.release-btn').hasClass('js_login')){
                $('.release-dropdown').find('.release-btn').click()
                return false;
            }
            $(this).parent().parent().next().show();
        });
        $('.js_cancel_comment_reply').on('click', function(e){
            $(this).parent().parent().hide();
        });



        /*$('.define-btn').click(function (e){
            e.preventDefault()
            var _this = $(this), _content = _this.parent().siblings().find('textarea').val()
            if(!_content){
                layer.msg('请输入评论')
                return false
            }
            $.ajax({
                type: "POST",
                url: "/Index/ajaxComment",
                data: {
                    info_id: $('input[name="info_id"]').val(),
                    info_type: $('input[name="info_type"]').val(),
                    content: _content,
                    parent_id: _this.data('parent'),
                    top_id: _this.data('top')
                },
                dataType: "json",
                success: function(data){
                    if(data.status==1){
                        success_msg(data.msg)
                    }else{
                        error_msg(data.msg)
                    }
                }
            });
        })*/
        $('.cancel-btn').click(function (){
            $('textarea[name="comment"]').val('')
        })
        $('.social-share-icon').click(function (){
            $.ajax({
                type: "POST",
                url: "/Index/ajaxShare",
                data: {
                    info_id: $('input[name="info_id"]').val(),
                },
                dataType: "json",
                success: function(data){

                }
            });
        })
        tinymce.init({
            selector: '.comment-area',
            language: 'zh_CN',
            menubar: false,
            placeholder: '  发条友善的评论~',
            // toolbar: false,
            toolbar: 'quickimage codesample emoticons',
            toolbar_location: 'bottom',
            toolbar_mode: 'floating',
            toolbar_persist: false,
            statusbar: false,
            inline: true,
            plugins: 'paste image quickbars codesample emoticons',
            quickbars_insert_toolbar: false,
            // quickbars_insert_toolbar: 'quickimage codesample',
            quickbars_image_toolbar: false,
            quickbars_selection_toolbar: false,
            height: '100',
            paste_data_images: false,
            convert_urls: false,
            codesample_languages: code_lang,
            codesample_global_prismjs: true,
            emoticons_database: 'emojiimages',
            //emoticons_database_url: '/js/emojis.js',
            emoticons_images_url: '/Application/Home/View/default/Public/images/72x72/',
            paste_as_text: true,
            /*paste_preprocess: function (plugin, args) {
                console.log(args.content);
                args.content = '';
            },*/
            init_instance_callback: function(editor) {
                editor.on('NodeChange', function(e) {
                    var _area = $(e.element).parents('.comment-area')
                    if(!_area.html() || _area.html()=='<p><br data-mce-bogus="1"></p>'){
                        _area.parent().next().addClass('release-textarea-btn')
                    }else{
                        _area.parent().next().removeClass('release-textarea-btn')
                    }
                });
            },
            images_upload_handler: function (blobInfo, success, failure, progress) {
                var xhr, formData;
                xhr = new XMLHttpRequest();
                xhr.withCredentials = false;
                xhr.open('POST', "/blog/md_upload");

                xhr.upload.onprogress = function(e){
                    progress(e.loaded / e.total * 100);
                }

                xhr.onload = function() {
                    var json;
                    if (xhr.status == 403) {
                        failure('HTTP Error: ' + xhr.status, { remove: true });
                        return;
                    }
                    if (xhr.status < 200 || xhr.status >= 300 ) {
                        failure('HTTP Error: ' + xhr.status, { remove: true });
                        return;
                    }
                    json = JSON.parse(xhr.responseText);
                    if(json.url){
                        success(json.url);
                    }else{
                        failure(json.message, { remove: true });
                        return;
                    }
                };

                xhr.onerror = function () {
                    failure('Code: ' + xhr.status, { remove: true });
                }

                formData = new FormData();
                formData.append('editormd-image-file', blobInfo.blob(), blobInfo.filename());

                xhr.send(formData);
            }
        });
        var _comment = true
        $('.comment-action-btn').click(function (e){
            e.preventDefault()
            // _content = _this.parent().siblings().find('textarea').val()
            var _this = $(this), _content = _this.parent().siblings().find('.comment-area').html()
            if(!_content || _content == ' '|| _content == '<p>'|| _content == '<p><br></p>' || _content == '<p> </p>' || _content == '<p>&nbsp;</p>' || _content == '<p><br data-mce-bogus="1"></p>'){
                layer.msg('请输入评论')
                return false
            }
            if(_comment){
                _comment = false
                $.ajax({
                    type: "POST",
                    url: "/Index/ajaxComment",
                    data: {
                        info_id: $('input[name="info_id"]').val(),
                        info_type: $('input[name="info_type"]').val(),
                        content: _content,
                        parent_id: _this.data('parent'),
                        top_id: _this.data('top')
                    },
                    dataType: "json",
                    success: function(data){
                        _comment = true
                        if(data.status==1){
                            success_msg(data.msg)
                        }else{
                            error_msg(data.msg)
                        }
                    }
                });
            }
        })


    </script><div class="layui-layer-move"></div><link href="./Rviz显示不出数据了！一文搞懂Qos - 古月居_files/v5.css" rel="stylesheet" type="text/css"></body></html>